(this["webpackJsonpjira-assistant"]=this["webpackJsonpjira-assistant"]||[]).push([[22],{255:function(e,t,a){"use strict";var n=a(8),r=a(5),o=a(6),i=a(46),s=a(243),l=a(37),c=a(15),u=a(16),d=a(2),m=a.n(d),p=a(113),g=a(247),f=a(9),h=a(242),k=a(3),v=a.n(k),y=a(262),E=a(1),b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var o;Object(r.a)(this,a),(o=t.call(this,e,"Add worklog",{width:"550px"})).searchTickets=function(e){return e=(e||"").toLowerCase(),o.allTicketList.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))},o.saveWorklog=function(e,t,a){if(!o.validateData(e,t,o.state.ctlClass))return o.$message.warning("Please provide value for all the mandatory fields","Incomplete worklog details"),!1;o.setState({isLoading:!0}),o.$worklog.saveWorklog({ticketNo:o.getTicketNo(e),dateStarted:e.dateStarted,overrideTimeSpent:e.overrideTimeSpent,description:e.description,worklogId:e.worklogId,isUploaded:e.isUploaded,timeSpent:e.timeSpent,parentId:e.parentId,id:e.id},a).then((function(t){o.props.onDone(e.id>0?{type:y.c.WorklogModified,edited:t,previousTime:o.previousTime}:{type:y.c.WorklogModified,added:t}),o.onHide()}),(function(e){o.setState({isLoading:!1}),"string"===typeof e?o.$message.error(e):console.error(e)}))},o.setValue=function(e,t){var a=o.state.log;t?a[e]=t:delete a[e],a=Object(n.a)({},a),o.setState({log:a})},o.formatTs=function(e){return e},o.handleKeyPress=function(e){var t=e.ctrlKey,a=e.charCode;if(t&&13===a){var n=Object(i.a)(o),r=n.isLoading,s=n.state,l=s.log,c=s.vald,u=s.uploadImmediately;r||o.saveWorklog(l,c,u&&!(l.id>0))}},Object(f.a)(Object(i.a)(o),"SessionService","SuggestionService","WorklogService","MessageService","UtilsService"),o.displayDateFormat="yyyy-MM-dd HH:mm";var s=o.$session.CurrentUser,l=s.commentLength,c=s.autoUpload;o.minCommentLength=l||0;var u=e.worklog,d=e.uploadImmediately;return o.state=o.getState(u),o.state.uploadImmediately="boolean"===typeof d?d:c||!1,o.allTicketList=[],o}return Object(o.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.$suggestion.getTicketSuggestion().then((function(t){e.allTicketList=t})),this.loadWorklog(this.state.log)}},{key:"loadWorklog",value:function(e){e.id&&this.fillWorklog(e,e.copy)}},{key:"getState",value:function(e){var t={showDialog:!0,vald:{},ctlClass:{},isLoading:!1,log:e};if(!e.id){t.log={ticketNo:e.ticketNo,dateStarted:v()(e.startTime||e.dateStarted||new Date).toDate(),allowOverride:e.allowOverride},e.parentId&&(t.log.parentId=e.parentId);var a=e.timeSpent;"number"===typeof a&&(a=this.$utils.formatSecs(a,!1,!0)),!e.allowOverride&&a&&(t.log.timeSpent=a),a?t.log.overrideTimeSpent=a:(t.log.overrideTimeSpent="01:00",t.log.allowOverride=!0),this.validateData(t.log,t.vald,t.ctlClass)}return t}},{key:"fillWorklog",value:function(e,t){var a=this;return this.$worklog.getWorklog(e).then((function(e){e.timeSpent&&(e.timeSpent=e.timeSpent.substring(0,5),"00:00"===e.timeSpent&&(e.timeSpent=null)),e.overrideTimeSpent&&(e.overrideTimeSpent=e.overrideTimeSpent.substring(0,5),e.allowOverride=!0),t?(a.$analytics.trackEvent("Worklog copy",E.i.UserActions,e.isUploaded?"Uploaded worklog":"Pending worklog"),delete e.id,delete e.isUploaded,delete e.worklogId,delete e.parentId,e.dateStarted=v()("".concat((new Date).format("yyyy/MM/dd")," ").concat(e.dateStarted.format("HH:mm:ss"))).toDate()):(a.previousTime=e.dateStarted,a.$analytics.trackEvent("Worklog view",E.i.UserActions,e.isUploaded?"Uploaded worklog":"Pending worklog"));var n={log:e,vald:a.state.vald,ctlClass:a.state.ctlClass};return a.validateData(n.log,n.vald,n.ctlClass),a.setState(n),e}))}},{key:"validateData",value:function(e,t,a){e.allowOverride&&(e.overrideTimeSpent=e.overrideTimeSpent||e.timeSpent||"00:00");var n=!0,r=this.getTicketNo(e);return n=(t.ticketNo=!(!r||r.length<3))&&n,n=(t.dateStarted=!(!e.dateStarted||e.dateStarted.length<16))&&n,t.overrideTimeSpent=e.allowOverride&&e.overrideTimeSpent&&e.overrideTimeSpent.length>=4,t.overrideTimeSpent=t.overrideTimeSpent&&this.$worklog.getTimeSpent(e.overrideTimeSpent)>0,n=(t.overrideTimeSpent=t.overrideTimeSpent||!e.allowOverride&&e.timeSpent&&e.timeSpent.length>=4)&&n,n=(t.description=this.minCommentLength<1||!(!e.description||e.description.length<this.minCommentLength))&&n,a.ticketNo=t.ticketNo?"is-valid":"is-invalid",a.dateStarted=t.dateStarted?"is-valid":"is-invalid",a.overrideTimeSpent=t.overrideTimeSpent?"is-valid":"is-invalid",a.description=t.description?"is-valid":"is-invalid",n}},{key:"getTicketNo",value:function(e){return e&&e.ticketNo?"string"===typeof e.ticketNo?e.ticketNo:e.ticketNo.value:null}},{key:"deleteWorklog",value:function(e){var t=this;this.setState({isLoading:!0});var a=e.ticketNo;e.ticketNo=a.value||a,this.$worklog.deleteWorklog(e).then((function(a){t.setState({isLoading:!1}),t.props.onDone({type:y.c.DeletedWorklog,removed:e.id,deleted:e.id,deletedObj:e}),t.onHide()}),(function(){e.ticketNo=a}))}},{key:"getFooter",value:function(){var e=this,t=this.isLoading,a=this.state,n=a.log,r=a.vald,o=a.uploadImmediately;return m.a.createElement(m.a.Fragment,null,!n.id&&m.a.createElement(h.c,{checked:o,className:"pull-left",label:"Upload immediately to Jira",onChange:function(t){return e.setState({uploadImmediately:t})}}),n.id>0&&m.a.createElement(h.b,{type:"danger",icon:"fa fa-trash-o",label:"Delete",className:"pull-left",disabled:t,onClick:function(){return e.deleteWorklog(n)}}),n.id>0&&!n.worklogId&&m.a.createElement(h.b,{type:"success",isLoading:t,icon:"fa fa-upload",label:"Save & Upload",className:"pull-left",disabled:t,onClick:function(){return e.saveWorklog(n,r,!0)}}),m.a.createElement(h.b,{type:"primary",icon:"fa fa-save",label:"Save",isLoading:t,disabled:t,onClick:function(){return e.saveWorklog(n,r,o&&!(n.id>0))}}),m.a.createElement(h.b,{type:"secondary",icon:"fa fa-times",label:"Cancel",onClick:this.onHide}))}},{key:"render",value:function(){var e=this,t=this.minCommentLength,n=this.state,r=n.log,o=n.vald;return Object(s.a)(Object(l.a)(a.prototype),"renderBase",this).call(this,m.a.createElement("div",{className:"pad-22",onKeyPress:this.handleKeyPress},m.a.createElement("div",{className:"row pad-b"},m.a.createElement("div",{className:"col-sm-3"},m.a.createElement("strong",null,"Log time")),m.a.createElement("div",{className:"p-col-9 col-sm-9"},m.a.createElement("div",{className:"form-group"},m.a.createElement("div",{className:"ctlClass.dateStarted"},m.a.createElement(h.e,{value:r.dateStarted,showTime:!0,onChange:function(t){return e.setValue("dateStarted",t)}})),m.a.createElement("span",{className:"help-block ".concat(o.dateStarted?"":"msg-error")},"Provide the time you had started the work")))),m.a.createElement("div",{className:"row pad-b"},m.a.createElement("div",{className:"col-sm-3"},m.a.createElement("strong",null,"Ticket no")),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(h.a,{value:r.ticketNo,displayField:"value",className:"w-p-100",placeholder:"Enter the ticket number or start typing the summary to get suggestion",dataset:this.searchTickets,disabled:r.isUploaded,maxlength:20,onChange:function(t){return e.setValue("ticketNo",t)},autoFocus:!0},(function(e){return m.a.createElement("span",{style:{fontSize:12,margin:"10px 10px 0 0"}},e.label)})),m.a.createElement("span",{className:"help-block ".concat(o.ticketNo?"":"msg-error")},"Provide the ticket no on which you had to log your work"))),m.a.createElement("div",{className:"row pad-b"},m.a.createElement("div",{className:"col-sm-3"},m.a.createElement("strong",null,"Actual time spent")),m.a.createElement("div",{className:"col-sm-2"},m.a.createElement("strong",null,this.formatTs(r.timeSpent)||"-")),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("strong",null,"Override time spent")),m.a.createElement("div",{className:"col-sm-3"},m.a.createElement("div",{className:"form-group no-margin"},m.a.createElement("div",{className:"p-inputgroup ctlClass.overrideTimeSpent"},m.a.createElement("span",{className:"p-inputgroup-addon"},m.a.createElement(h.c,{checked:r.allowOverride||!1,onChange:function(t){return e.setValue("allowOverride",t)}})),m.a.createElement(p.InputMask,{mask:"99:99",className:"w-80",value:r.overrideTimeSpent||"",placeholder:"00:00",maxlength:5,disabled:!r.allowOverride,onChange:function(t){return e.setValue("overrideTimeSpent",t.value)}})))),m.a.createElement("div",{className:"col-sm-3"}),m.a.createElement("div",{className:"col-sm-9 no-t-padding"},m.a.createElement("span",{className:"help-block ".concat(o.overrideTimeSpent?"":"msg-error")},"Provide the time spent on this task (override to change existing)"))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-3"},m.a.createElement("strong",null,"Comments")),m.a.createElement("div",{className:"col-sm-9"},m.a.createElement(h.j,{multiline:!0,rows:5,value:r.description||"",className:"form-control ".concat(o.description?"":"ctl-error"),onChange:function(t){return e.setValue("description",t)},placeholder:"Provide a brief info about the task you had done.".concat(t?" Should be atleast ".concat(t," chars is length."):"")})))))}}]),a}(g.a);t.a=b},262:function(e,t,a){"use strict";a.d(t,"c",(function(){return n.a})),a.d(t,"a",(function(){return R})),a.d(t,"b",(function(){return J})),a.d(t,"k",(function(){return ce})),a.d(t,"e",(function(){return me})),a.d(t,"f",(function(){return fe})),a.d(t,"g",(function(){return ve})),a.d(t,"h",(function(){return Ee})),a.d(t,"j",(function(){return be})),a.d(t,"i",(function(){return Y})),a.d(t,"d",(function(){return we}));var n=a(47),r=a(31),o=a(0),i=a.n(o),s=a(4),l=a(8),c=a(5),u=a(6),d=a(46),m=a(15),p=a(16),g=a(243),f=a(37),h=a(2),k=a.n(h),v=a(22),y=a.n(v),E=a(244),b=a(9),w=a(316),S=a(294),N=a(317),C=a(318),T=a(3),j=a.n(T),O=a(259),D=a(283),W=a(32),x=a(255),U=a(295),L=a(10),M=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.toggleShowAttendees=function(){return e.setState({showAttendees:!e.state.showAttendees})},e.toggleShowDesc=function(){return e.setState({showFullDesc:!e.state.showFullDesc})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.cut,a=e.eventDetails,n=this.state,r=n.showAttendees,o=n.showFullDesc;return a?k.a.createElement("div",{className:"event-details"},k.a.createElement("div",{className:"header"},k.a.createElement("div",{className:"controls"}),k.a.createElement("div",{className:"title"},t(a.summary,75))),k.a.createElement("div",{className:"body"},k.a.createElement("div",{className:"detail"},k.a.createElement("div",{className:"title"},k.a.createElement("i",{className:"fa fa-clock-o"})),k.a.createElement("div",{className:"info"},k.a.createElement("span",null,a.date),k.a.createElement("span",{className:"info"},a.startTime," - ",a.endTime," ",a.remaining))),a.location&&k.a.createElement("div",{className:"detail"},k.a.createElement("div",{className:"title"},k.a.createElement("i",{className:"fa fa-map-marker"})),k.a.createElement("div",{className:"info"},a.location)),a.videoCall&&k.a.createElement("div",{className:"detail"},k.a.createElement("div",{className:"title"},k.a.createElement("i",{className:"fa fa-video-camera"})),k.a.createElement("div",{className:"info"},k.a.createElement("a",{href:a.videoCall.url,target:"_blank",rel:"noopener noreferrer"},"Join meeting: ",a.videoCall.name))),a.attendees&&k.a.createElement("div",{className:"detail pointer"},k.a.createElement("div",{className:"title"},k.a.createElement("i",{className:"fa fa-users"})),k.a.createElement("div",{className:"info",onClick:this.toggleShowAttendees},k.a.createElement("div",{className:"icon pull-right"},k.a.createElement("i",{className:"fa ".concat(r?"fa-angle-up":"fa-angle-down")})),k.a.createElement("div",null,k.a.createElement("span",null,a.attendees.total," guests"),a.attendees&&k.a.createElement("span",{className:"info"},a.attendees.yes&&k.a.createElement("font",null,a.attendees.yes," yes,"),a.attendees.no&&k.a.createElement("font",null,a.attendees.no," no,"),a.attendees.tentative&&k.a.createElement("font",null," ",a.attendees.tentative," tentative,"),a.attendees.awaiting&&k.a.createElement("font",null," ",a.attendees.awaiting," awaiting")))),r&&a.attendees&&k.a.createElement("div",{className:"attendees"},a.attendees.list.map((function(e,t){return k.a.createElement("div",{key:t,className:"attendee"},e.displayName&&k.a.createElement("span",{className:"name"}," ",e.displayName),e.email&&k.a.createElement("span",{className:"email"}," (",e.email,")"))})))),a.description&&k.a.createElement("div",{className:"detail"},k.a.createElement("div",{className:"title"},k.a.createElement("i",{className:"fa fa-align-justify"})),k.a.createElement("div",{className:"info"},Object(L.f)(o?a.description:t(a.description,350))),a.description.length>350&&k.a.createElement("div",{style:{textAlign:"center"}},k.a.createElement("span",{className:"link",onClick:this.toggleShowDesc},o?"show less":"show all"))))):null}}]),a}(h.PureComponent),A=a(247),I=a(242),$=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"Calendar configurations")).setValue=function(e,t){var a=n.state.settings;a=Object(l.a)({},a),e?a[t]=e:delete a[t],n.setState({settings:a})},n.onDone=function(){n.props.onDone(n.state.settings),n.onHide()},n.state={showDialog:!0,settings:Object(l.a)({},e.settings)},n.style={width:"667px"},n}return Object(u.a)(a,[{key:"getFooter",value:function(){return k.a.createElement(k.a.Fragment,null,k.a.createElement(I.b,{type:"default",icon:"fa fa-times",label:"Cancel",onClick:this.onHide}),k.a.createElement(I.b,{type:"success",icon:"fa fa-floppy-o",label:"Done",onClick:this.onDone}))}},{key:"render",value:function(){var e=this,t=this.state.settings;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement("div",{className:"pad-22"},k.a.createElement("h3",{className:"control-sidebar-heading"},"Item Colors"),k.a.createElement("div",{className:"form-group row"},k.a.createElement("label",{className:"col-md-3 col-form-label"},"Meeting entry color"),k.a.createElement("div",{className:"col-md-9 col-form-label"},k.a.createElement(I.d,{value:t.eventColor,fieldName:"eventColor",onChange:this.setValue}),k.a.createElement("label",{className:"form-check-label"},"Specify the color of the entry for meeting"))),k.a.createElement("div",{className:"form-group row"},k.a.createElement("label",{className:"col-md-3 col-form-label"},"Worklog entry color"),k.a.createElement("div",{className:"col-md-9 col-form-label"},k.a.createElement(I.d,{value:t.worklogColor,fieldName:"worklogColor",onChange:this.setValue}),k.a.createElement("label",{className:"form-check-label"},"Specify the color of the worklog entry"))),k.a.createElement("div",{className:"form-group row"},k.a.createElement("label",{className:"col-md-3 col-form-label"},"Info color (Valid)"),k.a.createElement("div",{className:"col-md-9 col-form-label"},k.a.createElement(I.d,{value:t.infoColor_valid,fieldName:"infoColor_valid",onChange:this.setValue}),k.a.createElement("label",{className:"form-check-label"},"Specify the color of the info entry when the total hours logged is equal to the max hours to log setting"))),k.a.createElement("div",{className:"form-group row"},k.a.createElement("label",{className:"col-md-3 col-form-label"},"Info color (Less)"),k.a.createElement("div",{className:"col-md-9 col-form-label"},k.a.createElement(I.d,{value:t.infoColor_less,fieldName:"infoColor_less",onChange:this.setValue}),k.a.createElement("label",{className:"form-check-label"},"Specify the color of the info entry when the total hours logged is lesser than the max hours to log"))),k.a.createElement("div",{className:"form-group row"},k.a.createElement("label",{className:"col-md-3 col-form-label"},"Info color (High)"),k.a.createElement("div",{className:"col-md-9 col-form-label"},k.a.createElement(I.d,{value:t.infoColor_high,fieldName:"infoColor_high",onChange:this.setValue}),k.a.createElement("label",{className:"form-check-label"},"Specify the color of the info entry when the total hours logged is higher than the max hours to log"))),k.a.createElement("h3",{className:"control-sidebar-heading"},"Show / Hide Entries"),k.a.createElement("div",{className:"form-group"},k.a.createElement(I.c,{checked:t.showMeetings||!1,onChange:function(t){return e.setValue(t,"showMeetings")},label:"Display entry for meetings integrated from calendar"})),k.a.createElement("div",{className:"form-group"},k.a.createElement(I.c,{checked:t.showWorklogs||!1,onChange:function(t){return e.setValue(t,"showWorklogs")},label:"Display worklog added by you"})),k.a.createElement("div",{className:"form-group"},k.a.createElement(I.c,{checked:t.showInfo||!1,onChange:function(t){return e.setValue(t,"showInfo")},label:"Display information about total hours logged on daily basis"}))))}}]),a}(A.a),P=a(1),F=(a(272),[{value:"dayGridMonth",label:"Month"},{value:"timeGridWeek",label:"Week"},{value:"timeGridDay",label:"Day"}]),R=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n,r;return Object(c.a)(this,a),(r=t.call(this,e,"Calendar","fa-calendar")).refreshData=function(){r.fillEvents(r.startDate,r.endDate)},r.viewModeChanged=function(e){r.setState({viewMode:e}),r.fc.calendar.changeView(e),r.saveSettings(Object(l.a)(Object(l.a)({},r.state.settings),{},{viewMode:e}),!0)},r.hideWorklogDialog=function(){return r.setState({showAddWorklogPopup:!1})},r.toggleSettingsDialog=function(){return r.setState({showSettingsPopup:!r.state.showSettingsPopup})},r.addEvent=function(e){if(0!==e.type){var t=!1,a=Object(d.a)(r).events;if(e.removed){var n=e.removed+(e.deletedObj.worklogId?"#".concat(e.deletedObj.worklogId):"");e=a.first((function(e){return e.id===n&&1===e.entryType})),a.remove(e),r.latestData.remove((function(t){return t.id===e.id&&1===t.entryType}))}else if(e.added||e.edited){var o=e.previousTime;(e=e.added||e.edited).backgroundColor=r.state.settings.worklogColor,e.borderColor=e.backgroundColor,a.removeAll((function(t){return t.id===e.id&&1===t.entryType})),a.push(e),r.latestData.removeAll((function(t){return t.id===e.id&&1===t.entryType})),r.latestData.push(e),t=!0,o&&r.updateAllDayEvent({start:o})}return r.updateAllDayEvent(e),r.setEventsData(a),t}},r.hideOPEvent=function(){return r.setState({showOpEvent:!1})},r.saveSettings=function(e,t){if(r.isGadget)return Object(g.a)((n=Object(d.a)(r),Object(f.a)(a.prototype)),"saveSettings",n).call(n),void(!0!==t&&r.refreshData());r.$session.pageSettings.calendar=e,r.setState({settings:e},!0!==t?r.refreshData:null),r.$config.saveSettings("calendar",e)},Object(b.a)(Object(d.a)(r),"SessionService","WorklogService","MessageService","AnalyticsService","OutlookService","CalendarService","UtilsService","UserUtilsService","ConfigService","TicketService"),r.hideMenu=!e.isGadget,r.hideExport=!0,e.isGadget&&(r.className="calendar-view"),r.$session.pageSettings.calendar?r.state.settings=Object.assign({showMeetings:!0,showWorklogs:!0,showInfo:!0},r.$session.pageSettings.calendar):r.state.settings={viewMode:"timeGridWeek",showMeetings:!0,showWorklogs:!0,showInfo:!0},r.setMenuItems(),r.CurrentUser=r.$session.CurrentUser,r.maxTime=r.CurrentUser.maxHours,r.maxTime&&(r.maxTime=60*r.maxTime*60),r.fullCalendarOpts=r.getCalendarOptions(),r}return Object(u.a)(a,[{key:"setMenuItems",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.mnuWL_Upload={label:"Upload worklog",icon:"fa fa-upload",command:function(){return r.uploadWorklog()}},this.contextMenuItems=[{label:"Edit worklog",icon:"fa fa-edit",command:function(){return r.showWorklogPopup(r.currentWLItem)}},{label:"Open ticket",icon:"fa fa-external-link",command:function(){return r.openTicket(r.currentWLItem)}},{label:"Copy worklog",icon:"fa fa-copy",command:function(){return r.copyWorklog()}},this.mnuWL_Upload,{label:"Delete worklog",icon:"fa fa-times",command:function(){return r.deleteWorklog()}}],t=(this.$session.CurrentUser.meetingTicket||"").trim().split(",").select((function(e){return e||null})),e.next=5,this.$ticket.getTicketDetails(t);case 5:a=e.sent,n=[],t.length>0&&(t.forEach((function(e){var t=(a[e.toUpperCase()]||{}).fields,o=(t=void 0===t?{}:t).summary,i=void 0===o?"":o;n.push({label:i?"".concat(e,": ").concat(r.$utils.cut(i,65,!0)):e,icon:"fa fa-ticket",command:function(t){return r.createWorklog(t.originalEvent,r.currentMeetingItem,e)}})})),1===t.length&&(this.defaultMeetingTicket=t[0])),n.length>0&&n.push({separator:!0}),n.push({label:"Choose ticket",icon:"fa fa-pencil-square-o",command:function(e){return r.createWorklog(e.originalEvent,r.currentMeetingItem,"")}}),this.mnuCal_AddWL={label:"Add worklog to",icon:"fa fa-clock-o",items:n,command:function(e){return r.createWorklog(e.originalEvent,r.currentMeetingItem,"")}},this.mnuCal_OpenUrl={label:"Open video call",icon:"fa fa-video-camera",command:function(){return r.openVideoCall(r.currentMeetingItem)}},this.calMenuItems=[this.mnuCal_AddWL,{label:"Show details",icon:"fa fa-info-circle",command:function(e){return r.showCalendarDetails({extendedProps:{sourceObject:r.currentMeetingItem}},e.originalEvent,null)}},this.mnuCal_OpenUrl];case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCalendarOptions",value:function(){var e=this.CurrentUser,t=e.startOfWeek,a=e.startOfDay,n=e.endOfDay,r=e.workingDays,o=e.timeFormat,i=this.props.viewMode;this.isGadget||("agendaWeek"===(i=this.state.settings.viewMode)?i="timeGridWeek":"month"===i?i="dayGridMonth":"agendaDay"===i&&(i="timeGridDay"));var s=t;s&&s>0?s-=1:s=null;var l=(o||"").indexOf("tt")>-1,c=!!l&&"short";return{plugins:[S.d,N.a,C.a],timezone:"local",selectHelper:!0,displayEventTime:!0,selectable:!0,firstDay:s,height:"parent",fixedWeekCount:!1,eventLimit:!0,editable:!0,droppable:!0,slotDuration:"00:15:00",minTime:a||"10:00",maxTime:n||"19:00",allDayText:"total",header:!1,nowIndicator:!0,navLinks:!0,defaultView:i,businessHours:{dow:r||[1,2,3,4,5],start:a||"10:00",end:n||"19:00"},slotLabelFormat:{hour:"numeric",minute:"2-digit",omitZeroMinute:l,meridiem:c,hour12:l},eventTimeFormat:{hour:"numeric",minute:"2-digit",omitZeroMinute:l,meridiem:c,hour12:l},select:this.select.bind(this),eventRender:this.eventRender.bind(this),datesRender:this.viewRender.bind(this),eventDrop:this.eventDrop.bind(this),eventResize:this.eventResize.bind(this),eventClick:this.eventClick.bind(this)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.viewMode&&this.setState({settings:Object(l.a)(Object(l.a)({},this.state.settings),{},{viewMode:e.viewMode})}),Object(g.a)(Object(f.a)(a.prototype),"UNSAFE_componentWillReceiveProps",this).call(this,e)}},{key:"createWorklog",value:function(e,t,a){var n=this;if(Object(W.hideContextMenu)(),t.start.dateTime){e.stopPropagation(),e.preventDefault();var r=T.duration(T(t.end.dateTime).diff(t.start.dateTime)),o={dateStarted:t.start.dateTime,timeSpent:"".concat(r.hours().pad(2),":").concat(r.minutes().pad(2)),description:t.summary,parentId:t.id};return a?(o.ticketNo=a,this.$worklog.saveWorklog(o).then((function(t){n.addEvent({added:t}),y()(e.currentTarget).remove()}),(function(e){"string"===typeof e?n.$message.error(e):console.error(e)})),this.$analytics.trackEvent("Quick add WL",P.i.UserActions)):this.showWorklogPopup(o),!1}}},{key:"fillEvents",value:function(e,t){var a=this;e=T(e).startOf("day"),t=T(t).endOf("day");var n=[this.$worklog.getWorklogsEntry(e,t)];this.CurrentUser.gIntegration&&this.CurrentUser.hasGoogleCreds&&this.state.settings.showMeetings&&n.push(this.$calendar.getEvents(e,t).then(null,(function(e){var t="Unable to fetch Google meetings!";return e.error&&e.error.message&&(t+="<br /><br />Reason:- ".concat(e.error.message)),a.$message.warning(t),[]}))),this.CurrentUser.oIntegration&&this.CurrentUser.hasOutlookCreds&&this.state.settings.showMeetings&&n.push(this.$outlook.getEvents(e,t).then(null,(function(e){var t="Unable to fetch Outlook meetings!";return e.error&&e.error.message&&(t+="<br /><br />Reason:- ".concat(e.error.message)),a.$message.warning(t),[]}))),this.setState({isLoading:!0,uploading:!1}),Promise.all(n).then((function(e){a.setState({isLoading:!1});var t=e[0],n=t.filter((function(e){return 1===e.entryType})).groupBy((function(e){return T(e.start).format("YYYY-MM-DD")})).map((function(e){return a.getAllDayObj(e)}));a.latestData=t,function(e){var t=[],n=a.state.settings;switch(n.showMeetings&&t.push(2),n.showWorklogs&&t.push(1),n.showInfo&&t.push(3),t.length){case 0:e=[];break;case 3:break;default:e=e.filter((function(e){return t.indexOf(e.entryType)>-1}))}a.setColors(e),a.setEventsData(e)}(t.addRange(n).addRange(e[1]))}),(function(e){return a.setState({isLoading:!1}),Promise.reject(e)}))}},{key:"setLoggedTime",value:function(e,t){var a=this.getTimeSpent(e);t.logged=a;var n="Logged: ".concat(this.$utils.formatSecs(a));return t.diff=a-this.maxTime,this.maxTime&&t.diff&&(n+=" (".concat(t.diff>0?"+":"-").concat(this.$utils.formatSecs(Math.abs(t.diff)),")")),this.setInfoColor(t,this.state.settings),t.title=n,t}},{key:"setInfoColor",value:function(e,t){this.maxTime&&e.diff?e.backgroundColor=e.diff>0?t.infoColor_high:t.infoColor_less:e.backgroundColor=t.infoColor_valid,e.borderColor=e.backgroundColor}},{key:"getTimeSpent",value:function(e){return e.sum((function(e){var t=T(e.start),a=T(e.end);return T.duration(a.diff(t)).asSeconds()}))}},{key:"updateAllDayEvent",value:function(e){var t=T(e.start).format("YYYY-MM-DD"),a=this.events;a.removeAll((function(e){return e.id===t&&3===e.entryType}));var r=a.filter((function(e){return 1===e.entryType&&T(e.start).format("YYYY-MM-DD")===t}));if(r&&r.length>0){var o=this.getAllDayObj({key:t,values:r});o.logged&&(a.push(o),this.setLoggedTime(r,o))}this.setEventsData(a),this.performAction(n.a.WorklogModified)}},{key:"openTicket",value:function(e){var t=this.$userutils.getTicketUrl(e.ticketNo);window.open(t)}},{key:"showWorklogPopup",value:function(e){Object(W.hideContextMenu)();var t,a={showAddWorklogPopup:!0};if(e.copy)return a.worklogItem=e.copy,void this.setState(a);if(e.id||e.parentId)t=e;else{var n=T.duration(e.end.diff(e.start));t={timeSpent:"".concat(n.hours().pad(2),":").concat(n.minutes().pad(2)),allowOverride:!0},e.dateStarted?t.startTime=e.dateStarted:t.startTime=e.isMonthMode?T("".concat(e.start.format("YYYY-MM-DD")," ").concat(this.CurrentUser.startOfDay),"YYYY-MM-DD HH:mm").toDate():e.start.toDate()}a.worklogItem=t,this.setState(a)}},{key:"setEventsData",value:function(e){this.events=Object(r.a)(e),this.setState({isLoading:!1,events:Object(r.a)(e),pendingWorklogCount:this.getPendingWorklogs(e).length})}},{key:"getAllDayObj",value:function(e){return this.setLoggedTime(e.values,{id:e.key,entryType:3,start:e.key,allDay:!0,editable:!1})}},{key:"setColors",value:function(e){var t=this,a=this.state.settings,n=a.worklogColor,r=a.eventColor;e.forEach((function(e){switch(e.entryType){case 1:e.backgroundColor=n,e.borderColor=n;break;case 2:e.backgroundColor=r,e.borderColor=r;break;case 3:t.setInfoColor(e,a)}}))}},{key:"select",value:function(e){var t=e.start,a=e.end,n=e.allDay,r="dayGridMonth"===this.state.settings.viewMode&&!this.isGadget;return!r&&n||(this.$analytics.trackEvent("Worklog drag",P.i.UserActions),this.showWorklogPopup({isMonthMode:r,start:T(t),end:T(a)})),!1}},{key:"showCalendarDetails",value:function(e,t,a){Object(W.hideContextMenu)(),t.preventDefault(),t.stopPropagation();var n=e.extendedProps.sourceObject;if(this.$analytics.trackEvent("View event details",P.i.UserActions,e.extendedProps.source),"goolge"===e.extendedProps.source)this.currentMeetingItem=this.getGoogleEventView(n);else if("outlook"===e.extendedProps.source)return void(this.currentMeetingItem=this.getOutlookEventView(n));if(this.$session.isQuickView){var r=y()(".app-header.navbar > button[appmobilesidebartoggler]").get(0);r&&(t={currentTarget:r})}else this.currentMeetingViewItem&&(t={currentTarget:this.currentMeetingViewItem});this.opEvent.show(t),this.setState({showOpEvent:!0})}},{key:"getGoogleEventView",value:function(e){var t={summary:e.summary,htmlLink:e.htmlLink,location:e.location,description:e.description,descrLimit:350,creator:e.creator,organizer:e.organizer};if(e.start){t.date=this.$userutils.formatDate(e.start.dateTime),t.startTime=this.$userutils.formatTime(e.start.dateTime);var a=T(e.start.dateTime).diff(T());a=a<0?e.end&&e.end.dateTime&&T().diff(e.end.dateTime)<0?"(now ongoing)":"":"(in ".concat(this.$utils.formatTs(a),")"),t.remaining=a}if(e.end&&e.end.dateTime&&(t.endTime=this.$userutils.formatTime(e.end.dateTime)),e.attendees&&(t.attendees={total:e.attendees.length,yes:e.attendees.count((function(e){return"accepted"===e.responseStatus})),no:e.attendees.count((function(e){return"notAccepted"===e.responseStatus})),awaiting:e.attendees.count((function(e){return"needsAction"===e.responseStatus})),tentative:e.attendees.count((function(e){return"tentative"===e.responseStatus})),list:e.attendees}),e.hangoutLink){var n=e.hangoutLink;n.lastIndexOf("/")>0&&(n=n.substring(n.lastIndexOf("/")+1)),t.videoCall={url:e.hangoutLink,name:n}}return t}},{key:"getOutlookEventView",value:function(e){var t={summary:e.subject,htmlLink:e.webLink,location:(e.location||{}).displayName,description:e.bodyPreview,descrLimit:350,creator:e.creator,organizer:((e.organizer||{}).emailAddress||{}).name};if(e.start){t.date=this.$userutils.formatDate(e.start.dateTime),t.startTime=this.$userutils.formatTime(e.start.dateTime);var a=T(e.start.dateTime).diff(T());a=a<0?e.end&&e.end.dateTime&&T().diff(e.end.dateTime)<0?"(now ongoing)":"":"(in ".concat(this.$utils.formatTs(a),")"),t.remaining=a}if(e.end&&e.end.dateTime&&(t.endTime=this.$userutils.formatTime(e.end.dateTime)),e.attendees&&(t.attendees={total:e.attendees.length,yes:e.attendees.count((function(e){return"accepted"===(e.status||{}).response})),no:e.attendees.count((function(e){return"notAccepted"===(e.status||{}).response})),awaiting:e.attendees.count((function(e){return"needsAction"===(e.status||{}).response})),tentative:e.attendees.count((function(e){return"tentative"===(e.status||{}).response})),list:e.attendees.map((function(e){var t=e.emailAddress;return{email:t.address,displayName:t.name}}))}),e.onlineMeetingUrl){var n=e.onlineMeetingUrl;n.lastIndexOf("/")>0&&(n=n.substring(n.lastIndexOf("/")+1)),t.videoCall={url:e.onlineMeetingUrl,name:n}}return t}},{key:"openVideoCall",value:function(e){Object(W.hideContextMenu)(),e&&e.hangoutLink&&window.open(e.hangoutLink)}},{key:"eventClick",value:function(e){var t=e.event,a=e.jsEvent,n=e.view;return this.currentMeetingViewItem=null,1===t.extendedProps.entryType?this.showWorklogPopup(t.extendedProps.sourceObject):2===t.extendedProps.entryType&&this.showCalendarDetails(t,a,n),!1}},{key:"viewRender",value:function(e){var t=e.view;this.startDate=t.activeStart,this.endDate=t.activeEnd,this.title="Calendar - [".concat(t.title.replace(/[^a-zA-Z0-9, ]+/g,"-"),"]"),this.saveSettings(Object(l.a)(Object(l.a)({},this.state.settings),{},{viewMode:t.type}))}},{key:"eventDrop",value:function(e){var t=this,a=e.event,n=e.revert,r=e.jsEvent;if(r.ctrlKey||r.altKey){n();var o=this.events.first((function(e){return 1===e.entryType&&e.id===a.id}));if(o){var i=o.sourceObject;o.start=T(new Date(i.dateStarted)).toDate(),o.end=T(new Date(i.dateStarted)).add(this.$worklog.getTimeSpent(i),"minutes").toDate()}this.$worklog.copyWorklog(a.extendedProps.sourceObject,a.start).then((function(e){t.addEvent({added:e}),t.$analytics.trackEvent("Worklog quick copied",P.i.UserActions,a.extendedProps.sourceObject.isUploaded?"Uploaded worklog":"Pending worklog")}))}else{var s=a.extendedProps.sourceObject.dateStarted;this.$worklog.changeWorklogDate(a.extendedProps.sourceObject,a.start).then((function(e){t.$analytics.trackEvent("Worklog moved",P.i.UserActions,a.extendedProps.sourceObject.isUploaded?"Uploaded worklog":"Pending worklog"),t.addEvent({previousTime:s,edited:e})}))}}},{key:"eventResize",value:function(e){var t=this,a=e.event;this.$worklog.changeWorklogTS(a.extendedProps.sourceObject,this.getEventDuration(a)).then((function(e){t.addEvent({edited:e}),t.$analytics.trackEvent("Worklog resized",P.i.UserActions,a.extendedProps.sourceObject.isUploaded?"Uploaded worklog":"Pending worklog")}))}},{key:"getEventDuration",value:function(e){if(e.end&&e.start){var t=T.duration(T(e.end).diff(e.start));return"".concat(t.hours().pad(2),":").concat(t.minutes().pad(2))}if(e.extendedProps.sourceObject){var a=e.extendedProps.sourceObject,n=a.overrideTimeSpent||a.timespent;if(n&&~n.indexOf(":"))return n}return"00:00"}},{key:"eventRender",value:function(e){var t=this,a=e.event,n=e.el,r=y()(n),o=" (".concat(this.$utils.formatTs(this.getEventDuration(a)),")"),i=a.extendedProps.sourceObject;if(i){var s="".concat(r.find(".fc-time").text()+o,"\n").concat(a.title);r.attr("title",s)}r.find(".fc-time").append('<span class="fc-hour">'.concat(o,"</span>"));var l=a.extendedProps.entryType;if(1===l){var c=i,u=function(e){e.stopPropagation(),e.preventDefault(),t.mnuWL_Upload.disabled=c.isUploaded,t.currentWLItem=c,Object(W.showContextMenu)(e,t.contextMenuItems)},d=y()('<i class="fa fa-ellipsis-v pull-left" title="Show options"></i>').on("click",u);r.find(".fc-time").prepend(d),r.bind("contextmenu",u)}else if(2===l){var m=null,p=i,g=this.latestData.some((function(e){return e.parentId===a.id&&1===e.entryType})),f=function(e){e.stopPropagation(),e.preventDefault(),e.currentTarget=m.get(0),t.currentMeetingItem=p,t.currentMeetingViewItem=h.find("i.fa").get(0),t.mnuCal_AddWL.disabled=g,t.mnuCal_OpenUrl.disabled=!p.hangoutLink,Object(W.showContextMenu)(e,t.calMenuItems)};m=g?y()('<i class="fa fa-ellipsis-v pull-left" title="Show options"></i>').on("click",f):y()('<i class="fa fa-clock-o pull-left" title="Create worklog for this meeting"></i>').on("click",(function(e){e.stopPropagation(),t.createWorklog(e,p,t.defaultMeetingTicket)}));var h=r.find(".fc-time");h.prepend(m),r.bind("contextmenu",f)}}},{key:"uploadWorklog",value:function(e){var t=this;if(this.setState({uploading:!0}),Object(W.hideContextMenu)(),e){var a=this.getPendingWorklogs().map((function(e){return e.sourceObject.id}));this.$worklog.uploadWorklogs(a).then((function(){t.$message.success("".concat(a.length," worklog(s) uploaded successfully!")),t.$analytics.trackEvent("Worklog uploaded: All",P.i.UserActions),t.refreshData()}),(function(){t.refreshData()}))}else this.$worklog.uploadWorklogs([this.currentWLItem.id],!0).then((function(e){t.setState({uploading:!1}),t.$message.success("Worklog uploaded successfully!"),t.events.removeAll((function(e){return 1===e.entryType&&e.id.toString()===t.currentWLItem.id.toString()})),t.addEvent({added:t.$worklog.getWLCalendarEntry(e[0])}),t.$analytics.trackEvent("Worklog uploaded: Individual",P.i.UserActions)}),(function(){return t.setState({uploading:!1})}))}},{key:"deleteWorklog",value:function(){var e=this;Object(W.hideContextMenu)(),this.$worklog.deleteWorklog(this.currentWLItem).then((function(){e.$analytics.trackEvent("Worklog deleted",P.i.UserActions,e.currentWLItem.isUploaded?"Uploaded worklog":"Pending worklog"),e.addEvent({removed:e.currentWLItem.id,deletedObj:e.currentWLItem})}))}},{key:"copyWorklog",value:function(){Object(W.hideContextMenu)();var e=Object.create(this.currentWLItem);e.copy=!0,this.showWorklogPopup({copy:e})}},{key:"getPendingWorklogs",value:function(e){return e||(e=this.events),e.filter((function(e){return 1===e.entryType&&!e.sourceObject.isUploaded}))}},{key:"executeEvent",value:function(e){e.type===n.a.AddWorklog||e.type===n.a.DeletedWorklog||e.type===n.a.WorklogModified?this.refreshData():Object(g.a)(Object(f.a)(a.prototype),"executeEvent",this).call(this,e)}},{key:"renderCustomActions",value:function(){var e=this,t=this.isGadget,a=this.state,n=a.pendingWorklogCount,r=a.isLoading,o=a.uploading;return k.a.createElement(k.a.Fragment,null,!this.isGadget&&k.a.createElement(k.a.Fragment,null,k.a.createElement(O.a,{icon:"fa fa-arrow-left",onClick:function(){return e.calendar.prev()}}),k.a.createElement(O.a,{icon:"fa fa-arrow-right",onClick:function(){return e.calendar.next()}}),k.a.createElement(D.a,{dataset:F,value:this.state.settings.viewMode,valueField:"value",displayField:"label",placeholder:"Select a view mode",onChange:this.viewModeChanged})),k.a.createElement("span",{className:"info-badge",title:n?"Upload ".concat(n," pending worklog(s)"):"No worklog pending to be uploaded"},n>0&&k.a.createElement("span",{className:"info btn-warning"},n),k.a.createElement(O.a,{type:"success",icon:o?"fa fa-spin fa-spinner":"fa fa-upload",disabled:o||n<1||r,onClick:function(){return e.uploadWorklog(!0)}})),!t&&k.a.createElement(O.a,{icon:"fa fa-refresh",disabled:r||o,onClick:this.refreshData,title:"Refresh meetings and worklogs"}),!t&&k.a.createElement(O.a,{icon:"fa fa-cogs",onClick:this.toggleSettingsDialog,title:"Show settings"}))}},{key:"render",value:function(){var e=this,t=this.hideWorklogDialog,n=this.addEvent,r=this.state,o=r.showAddWorklogPopup,i=r.showSettingsPopup,s=r.worklogItem,l=r.events,c=r.showOpEvent;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement(k.a.Fragment,null,k.a.createElement(w.FullCalendar,{ref:function(t){t&&(e.fc=t,e.calendar=t.calendar)},events:l,options:this.fullCalendarOpts}),o&&k.a.createElement(x.a,{worklog:s,onDone:n,onHide:t}),i&&k.a.createElement($,{settings:this.state.settings,onDone:this.saveSettings,onHide:this.toggleSettingsDialog}),k.a.createElement(U.OverlayPanel,{className:"op-event-details",ref:function(t){e.opEvent=t},showCloseIcon:!0,dismissable:!0,appendTo:document.body,onHide:this.hideOPEvent},c&&this.currentMeetingItem&&k.a.createElement(M,{eventDetails:this.currentMeetingItem,cut:this.$utils.cut}))))}}]),a}(E.b),B=a(264),H=a(253),_=(a(273),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e),Object(b.a)(Object(d.a)(n),"JiraService","SessionService");var r=n.$session.CurrentUser,o=r.epicNameField,i=r.storyPointField;n.epicNameField=null===o||void 0===o?void 0:o.id,n.storyPointField=null===i||void 0===i?void 0:i.id;var s=["key","summary","project","status","parent","assignee","issuetype","reporter","created","changeLog","timeestimate","aggregatetimeestimate","timeoriginalestimate","aggregatetimeoriginalestimate"];return n.epicNameField&&s.push(n.epicNameField),n.storyPointField&&s.push(n.storyPointField),n.fieldNames=s,n.state={},n}return Object(u.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.fetchData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.jql;this.jql!==(null===t||void 0===t?void 0:t.trim())&&this.fetchData()}},{key:"fetchData",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n,r,o,s,l,c,u=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.jql,n=t.setLoader,this.jql=null===a||void 0===a?void 0:a.trim(),this.jql){e.next=5;break}return this.setState({reportData:[],statusList:[]}),e.abrupt("return");case 5:return n&&n(!0),e.next=8,this.$jira.searchTickets(a,this.fieldNames,0,{expand:["changelog"]});case 8:return r=e.sent,o=(new Date).getTime(),s=r.map((function(e){for(var t=e.key,a=e.changelog,n=(a=void 0===a?{}:a).histories,r=e.fields,i=r.summary,s=r.status,l=r.issuetype,c=r.assignee,d=r.reporter,m=r.created,p=r.project,g=r.parent,f=r.timeestimate,h=r.aggregatetimeestimate,k=r.timeoriginalestimate,v=r.aggregatetimeoriginalestimate,y=r[u.epicNameField],E=r[u.storyPointField],b=[],w=n.length,S=function(){var e=n[w],t=e.created;e.items.filter((function(e){return"status"===e.field})).forEach((function(e){var a=e.fromString,n=e.toString;b.push({date:j()(t).toDate().getTime(),from:a,to:n})}))};--w>=0;)S();var N=j()(m).toDate().getTime(),C=b.length-1,T=b.reduce((function(e,t,a){var n=t.date,r=t.from,i=t.to;return e[r]=(e[r]||0)+(n-N),N=n,C===a&&(e[i]=(e[i]||0)+(o-N)),e}),{});return Object.keys(T).forEach((function(e){T[e]||delete T[e]})),{key:t,summary:i,status:s,issuetype:l,assignee:c,reporter:d,created:m,project:p,parent:g,timeestimate:f,aggregatetimeestimate:h,timeoriginalestimate:k,aggregatetimeoriginalestimate:v,statusData:T,changelog:b,epic:y,storyPoint:E}})),l=s.distinct((function(e){return e.project.key})),e.next=14,this.getStatuses(l);case 14:c=e.sent,this.columnList=this.getFieldList(c),n&&n(!1),this.setState({reportData:s,statusList:c});case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFieldList",value:function(e){var t=this.props.onAddWorklog;return[{field:"key",displayText:"Ticket No",type:"string",viewComponent:H.i,props:{onAddWorklog:t}},{field:"summary",displayText:"Summary",type:"string"},{field:"project",fieldKey:"project.key",displayText:"Project",type:"string",viewComponent:H.g},{field:"issuetype",fieldKey:"issuetype.name",displayText:"Issue Type",type:"string",viewComponent:H.e},{field:"epic",displayText:"Epic",type:"string",viewComponent:H.i,props:{hideWorklog:!0}},{field:"storyPoint",displayText:"Story Points",type:"number"},{field:"timeestimate",displayText:"Time Estimate",type:"number",viewComponent:H.j},{field:"aggregatetimeestimate",displayText:"\u03a3 Time Estimate",type:"number",viewComponent:H.j},{field:"timeoriginalestimate",displayText:"Original Estimate",type:"number",viewComponent:H.j},{field:"aggregatetimeoriginalestimate",displayText:"\u03a3 Original Estimate",type:"number",viewComponent:H.j},{field:"parent",fieldKey:"project.key",displayText:"Parent",type:"string",viewComponent:H.c,props:{onAddWorklog:t}},{field:"status",fieldKey:"status.name",displayText:"Status",type:"string",viewComponent:H.e},{field:"created",displayText:"Created",type:"datetime",viewComponent:H.b},{field:"assignee",fieldKey:"assignee.displayName",displayText:"Assignee",type:"string",viewComponent:H.m},{field:"reporter",fieldKey:"reporter.displayName",displayText:"Reporter",type:"string",viewComponent:H.m}].concat(Object(r.a)(e.map((function(e){return{field:"statusData.".concat(e.name),displayText:"Spent on ".concat(e.name),type:"number",viewComponent:H.j,props:{inputType:"ticks",days:!0}}}))))}},{key:"getStatuses",value:function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$jira.getProjectStatuses(t);case 2:return a=e.sent,n=[],r=[],a.forEach((function(e){e.forEach((function(e){e.statuses.forEach((function(e){if(!~n.indexOf(e.id)){var t=e.id,a=e.name,o=e.iconUrl;n.push(t),r.push({name:a,iconUrl:o})}}))}))})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.columnList,t=this.state,a=t.loading,n=t.reportData,r=this.props,o=r.settings,i=r.settingsChanged,s=o||{},l=s.displayColumns,c=s.groupBy,u=s.groupFoldable,d=s.sortField,m=s.isDesc;return k.a.createElement("div",{className:"statuswise-ts-grid"},!a&&n&&k.a.createElement(B.a,{dataset:n,exportSheetName:"Status wise time spent",columns:e,allowSorting:!0,onChange:i,displayColumns:l,groupBy:c,groupFoldable:u,sortField:d,isDesc:m,noRowsMessage:"No ticket details available"}))}}]),a}(h.PureComponent)),V=a(296),G=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e,"Gadget configurations")).onDone=function(){n.onHide(n.state.pageSettings)},n.onChange=function(e,t){var a=n.state.pageSettings;a=Object(l.a)(Object(l.a)({},a),{},{jql:e,jqlSettings:t}),n.setState({pageSettings:a})},n.className="no-padding";var r=e.pageSettings;return n.state={showDialog:!0,pageSettings:Object(l.a)({},r)},n}return Object(u.a)(a,[{key:"getFooter",value:function(){return k.a.createElement(I.b,{icon:"fa fa-floppy-o",label:"Done",onClick:this.onDone})}},{key:"render",value:function(){var e=this.state.pageSettings,t=e.jql,n=e.jqlSettings;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement("div",null,k.a.createElement(V.a,{jql:t,settings:n,onChange:this.onChange})))}}]),a}(A.a),Y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"Status Wise Time Spent","fa-list-alt")).settingsChanged=function(e){n.pageSettingsChanged({gridSettings:e})},n.pageSettingsChanged=function(e){e&&(n.settings=Object(l.a)(Object(l.a)({},n.settings),e),n.saveSettings()),n.setState({showSettings:!1,settings:e})},n.showSettings=function(){n.setState({showSettings:!0})},n.setLoader=function(e){n.setState({isLoading:e})},n.refreshData=function(){var e=n.state.gridKey;e++,n.setState({gridKey:e})},Object(b.a)(Object(d.a)(n),"SessionService","AnalyticsService"),n.state.gridKey=0,n}return Object(u.a)(a,[{key:"renderCustomActions",value:function(){return k.a.createElement(I.b,{icon:"fa fa-cogs",onClick:this.showSettings,title:"Show settings"})}},{key:"render",value:function(){var e=this.state,t=e.showSettings,n=e.gridKey,r=this.settings||{},o=r.jql,i=r.gridSettings;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement("div",{className:"status-wise-ts-gadget"},!o&&k.a.createElement("div",{className:"no-jql"},"No JQL was set to fetch the data. Click on ",k.a.createElement("span",{className:"fa fa-cogs"})," icon from top right corner of the gadget and modify the JQL to fetch data from Jira."),o&&k.a.createElement(_,{key:n,setLoader:this.setLoader,jql:o,settings:i,settingsChanged:this.settingsChanged,onAddWorklog:this.addWorklogOn}),t&&k.a.createElement(G,{pageSettings:this.settings,onHide:this.pageSettingsChanged})))}}]),a}(E.b),q=a(33),z=a(35),K=a(245),Z=a(282),J=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"Daywise worklog","fa-list-alt")).refreshData=function(){var e=n.settings.dateRange;if(e){var t=Object(Z.b)(e.quickDate)||[],a=Object(q.a)(t,2),r=a[0],o=a[1];r&&(e.fromDate=r,e.toDate=o),e.fromDate&&(n.setState({isLoading:!0}),e.dateWise=!0,n.$worklog.getWorklogs(e).then((function(e){e.forEach((function(e){return e.rowClass=n.$utils.getRowStatus(e)})),n.setState({worklogs:e,isLoading:!1})})))}},Object(z.b)(Object(d.a)(n),"WorklogService","UtilsService","UserUtilsService"),n.contextMenu=[{label:"Upload worklog",icon:"fa fa-clock-o",command:function(){return n.uploadWorklog()}},{label:"Add worklog",icon:"fa fa-bookmark",command:function(){return n.addWorklog()}}],n}return Object(u.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.refreshData()}},{key:"getWorklogUrl",value:function(e,t){return this.$userutils.getWorklogUrl(e,t)}},{key:"showContext",value:function(e,t){this.selectedDay=t,Object(W.showContextMenu)(e,this.contextMenu)}},{key:"dateSelected",value:function(e){this.settings.dateRange=e,e.toDate&&(this.refreshData(),e.auto||this.saveSettings())}},{key:"uploadWorklog",value:function(){var e=this,t=this.selectedDay.ticketList.filter((function(e){return!e.worklogId})).map((function(e){return e.id}));0!==t.length&&(this.setState({isLoading:!0}),this.$worklog.uploadWorklogs(t).then((function(){e.refreshData(),Object(g.a)(Object(f.a)(a.prototype),"performAction",e).call(e,E.a.WorklogModified)}),(function(t){e.setState({isLoading:!1})})))}},{key:"addWorklog",value:function(){var e=j()(this.selectedDay.dateLogged).toDate(),t=null;this.selectedDay.pendingUpload>0&&(t=this.$utils.formatTs(this.selectedDay.pendingUpload,!0)),Object(g.a)(Object(f.a)(a.prototype),"addWorklog",this).call(this,{startTime:e,timeSpent:t,allowOverride:!!t})}},{key:"executeEvent",value:function(e){e.type===E.a.AddWorklog||e.type===E.a.DeletedWorklog||e.type===E.a.WorklogModified?this.refreshData():Object(g.a)(Object(f.a)(a.prototype),"executeEvent",this).call(this,e)}},{key:"renderCustomActions",value:function(){var e=this;return k.a.createElement(I.e,{range:!0,value:this.settings.dateRange,onChange:function(t){return e.dateSelected(t)},style:{marginRight:"35px"}})}},{key:"render",value:function(){var e=this,t=this.state.worklogs;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement(K.c,{dataset:t,exportSheetName:"Datewise worklog"},k.a.createElement(K.e,null,k.a.createElement("tr",null,k.a.createElement(K.a,{sortBy:"dateLogged",style:{width:"100px"}},"Logged Date"),k.a.createElement(K.a,{sortBy:"totalHours"},"Total Hours"),k.a.createElement(K.a,{sortBy:"uploaded"},"Uploaded"),k.a.createElement(K.a,{sortBy:"pendingUpload"},"Pending Upload"),k.a.createElement(K.a,null,"Ticket List"))),k.a.createElement(K.d,null,(function(t){return k.a.createElement("tr",{key:t.dateLogged,onContextMenu:function(a){return e.showContext(a,t)},className:t.rowClass},k.a.createElement("td",null,e.$userutils.formatDate(t.dateLogged)),k.a.createElement("td",null,e.$utils.formatTs(t.totalHours)),k.a.createElement("td",null,e.$utils.formatTs(t.uploaded)),k.a.createElement("td",null,e.$utils.formatTs(t.pendingUpload)),k.a.createElement("td",null,k.a.createElement("ul",{className:"tags"},t.ticketList.map((function(t,a){return k.a.createElement("li",{key:a},t.worklogId&&k.a.createElement("a",{className:"link badge badge-pill skin-bg-font",href:e.getWorklogUrl(t.ticketNo,t.worklogId),target:"_blank",rel:"noopener noreferrer",title:t.comment},k.a.createElement("span",{className:"fa fa-clock-o"})," ",t.ticketNo,": ",t.uploaded),!t.worklogId&&k.a.createElement("span",{className:"link badge badge-pill skin-bg-font",onClick:function(){return e.editWorklog(t.id)},title:t.comment},k.a.createElement("span",{className:"fa fa-clock-o"})," ",t.ticketNo,": ",t.uploaded))})))))})),k.a.createElement(K.b,{span:5},"No worklog exists for selected date range!")))}}]),a}(E.b),Q=a(274),X=a(112),ee=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e,"Report configurations")).onDone=function(){n.$config.saveSettings("reports_UserDayWise",n.state.pageSettings),n.onHide(n.state.pageSettings)},n.setValue=function(e,t){var a=n.state.pageSettings;a[e]=t,a=Object(l.a)({},a),n.setState({pageSettings:a})},Object(z.b)(Object(d.a)(n),"ConfigService"),n.className="no-padding";var r=e.pageSettings;return n.state={showDialog:!0,pageSettings:Object(l.a)({},r)},n.hideEstimate=r.hideEstimate,n}return Object(u.a)(a,[{key:"getFooter",value:function(){return k.a.createElement(I.b,{icon:"fa fa-floppy-o",label:"Done",onClick:this.onDone})}},{key:"render",value:function(){var e=this.setValue,t=this.state.pageSettings,n=t.logFormat,r=t.breakupMode,o=t.timeZone,i=t.jql,s=t.hideEstimate;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement(X.TabView,{styleclass:"query-tab"},k.a.createElement(X.TabPanel,{header:"General",leftIcon:"fa fa-cog",contentClassName:"pad-22"},k.a.createElement("div",{className:"form-group row"},k.a.createElement("label",{className:"col-md-3 col-form-label"},"Log hour format"),k.a.createElement("div",{className:"col-md-9 col-form-label"},k.a.createElement("div",{className:"form-check"},k.a.createElement("label",{className:"form-check-label"},k.a.createElement("input",{className:"form-check-input",value:n,onChange:function(){return e("logFormat","1")},type:"radio",checked:"1"===n,name:"hourformat"}),"Format hours (2h 30m)")),k.a.createElement("div",{className:"form-check"},k.a.createElement("label",{className:"form-check-label"},k.a.createElement("input",{className:"form-check-input",value:n,onChange:function(){return e("logFormat","2")},type:"radio",checked:"2"===n,name:"hourformat"}),"Show in hours (2.5)")))),k.a.createElement("div",{className:"form-group row"},k.a.createElement("label",{className:"col-md-3 col-form-label"},"Log breakup"),k.a.createElement("div",{className:"col-md-9 col-form-label"},k.a.createElement("div",{className:"form-check"},k.a.createElement("label",{className:"form-check-label"},k.a.createElement("input",{className:"form-check-input",value:r,onChange:function(){return e("breakupMode","1")},type:"radio",checked:"1"===r,name:"logbreakup"}),"Single entry (Sum worklog added for same ticket on same day)")),k.a.createElement("div",{className:"form-check"},k.a.createElement("label",{className:"form-check-label"},k.a.createElement("input",{className:"form-check-input",value:r,onChange:function(){return e("breakupMode","2")},type:"radio",checked:"2"===r,name:"logbreakup"}),"Individual entry (Display individual entry for each of the worklog)")))),k.a.createElement("div",{className:"form-group row"},k.a.createElement("label",{className:"col-md-3 col-form-label"},"Report timezone (experimental)"),k.a.createElement("div",{className:"col-md-9 col-form-label"},k.a.createElement("div",{className:"form-check"},k.a.createElement("label",{className:"form-check-label"},k.a.createElement("input",{className:"form-check-input",value:o,onChange:function(){return e("timeZone","1")},type:"radio",checked:"1"===o,name:"timezone"}),"Use my local time zone for all users")),k.a.createElement("div",{className:"form-check"},k.a.createElement("label",{className:"form-check-label"},k.a.createElement("input",{className:"form-check-input",value:o,onChange:function(){return e("timeZone","2")},type:"radio",checked:"2"===o,name:"timezone"}),"Use containing groups timezone for all users")),k.a.createElement("div",{className:"form-check"},k.a.createElement("label",{className:"form-check-label"},k.a.createElement("input",{className:"form-check-input",value:o,onChange:function(){return e("timeZone","3")},type:"radio",checked:"3"===o,name:"timezone"}),"Use individual users timezone")))),k.a.createElement("div",{className:"form-group row"},k.a.createElement("div",{className:"form-check"},k.a.createElement("label",{className:"form-check-label"},k.a.createElement(I.c,{checked:s,onChange:function(t){return e("hideEstimate",t)},label:"Hide estimate related fields"}),this.hideEstimate&&!s&&k.a.createElement("span",{className:"pad-left-15"}," ( ",k.a.createElement("i",{className:"fa fa-exclamation-triangle"})," Change will take effect only after report is refreshed )"))))),k.a.createElement(X.TabPanel,{header:"JQL Filter",leftIcon:"fa fa-filter"},k.a.createElement(I.j,{multiline:!0,value:i,onChange:function(t){return e("jql",t)},style:{width:"100%",height:323},placeholder:"Provide the additional JQL filters to be applied while fetching data.",defaultValue:""}),k.a.createElement("span",null,k.a.createElement("strong",null,"Note:")," Date range and user list filter will be added automatically."))))}}]),a}(A.a),te=["-originalestimate","-totalLogged","-remainingestimate","-estVariance"],ae=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).settingsChanged=function(e,t){n.props.onChange(e,t)},n.setPropsInClass(e),n.state=n.getNewState(e),n.state.groupBy=[],n}return Object(u.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updateData(e)}},{key:"updateData",value:function(e){this.data===e.flatData&&this.pageSettings===e.pageSettings||(this.setPropsInClass(e),this.setState(this.getNewState(e)))}},{key:"getNewState",value:function(e){return{columns:this.getColumnSettings(e)}}},{key:"setPropsInClass",value:function(e){this.data=e.flatData,this.pageSettings=this.props.pageSettings}},{key:"getColumnSettings",value:function(e){var t=this,a=e.formatDateTime,n=e.convertSecs;return[{field:"groupName",displayText:"Group Name",type:"string"},{field:"projectName",displayText:"Project Name",type:"string"},{field:"issueType",displayText:"Issue Type",type:"string"},{field:"epicDisplay",displayText:"Epic",type:"string",format:function(e,a){return t.formatTicket(e,a.epicUrl)}},{field:"parent",displayText:"Parent",type:"string",format:function(e,a){return t.formatTicket(e,a.parentUrl)}},{field:"ticketNo",displayText:"Ticket No",type:"string",format:function(e,a){return t.formatTicket(e,a.ticketUrl)}},{field:"statusName",displayText:"Status",type:"string"},{field:"summary",displayText:"Summary",type:"string"},{field:"logTime",displayText:"Log Date & Time",type:"datetime",format:a},{field:"userDisplay",displayText:"Assignee",type:"string"},{field:"timeSpent",displayText:"Hr. Spent",type:"number",format:n},{field:"originalestimate",displayText:"Ori. Estm.",type:"number",format:n},{field:"totalLogged",displayText:"Total Worklogs",type:"number",format:n},{field:"remainingestimate",displayText:"Rem. Estm.",type:"number",format:n},{field:"estVariance",displayText:"Estm. Variance",type:"number",format:function(e){return(e>0?"+":"")+n(e)}},{field:"comment",displayText:"Comment"}]}},{key:"formatTicket",value:function(e,t){return e&&k.a.createElement("a",{href:t,className:"link",target:"_blank",rel:"noopener noreferrer"},e)}},{key:"render",value:function(){var e=this.props,t=e.flatData,a=e.pageSettings,n=(a=void 0===a?{}:a).hideEstimate,r=a.flatTableSettings,o=(r=void 0===r?{displayColumns:n?te:null}:r).groupBy,i=r.groupFoldable,s=r.displayColumns,l=r.sortField,c=r.isDesc,u=this.state.columns;return k.a.createElement(B.a,{className:"flat-data-grid",dataset:t,exportSheetName:"Flat Worklogs",columns:u,allowSorting:!0,onChange:this.settingsChanged,displayColumns:s,groupBy:o,groupFoldable:i,sortField:l,isDesc:c,noRowsMessage:"No worklog details available"})}}]),a}(h.PureComponent),ne=a(12),re=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={groupedData:n.generateGroupData(e)},n}return Object(u.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({groupedData:this.generateGroupData(this.props)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({groupedData:this.generateGroupData(e)})}},{key:"getCssClass",value:function(e,t){if(t=t>0?t:0,e.isHoliday)return t?"log-high":"col-holiday";var a=this.props.maxSecsPerDay;return t===a?"log-good":t<a?"log-less":t>a?"log-high":void 0}},{key:"generateGroupData",value:function(e){var t=this,a=e.rawData,n=e.dates,r=e.pageSettings,o=e.groups,i=e.getTicketUrl,s=parseInt(r.timeZone),l=o.map((function(e){var r={name:e.name,total:{},grandTotal:0,users:null};r.users=e.users.map((function(r){var o=null;2===s?o=e.timeZone:3===s&&(o=r.timeZone||e.timeZone),o&&"object"===Object(ne.a)(o)&&(o="string"===typeof o.value?o.value:""),"GRP_TZ"===o&&(o=e.timeZone),o&&"object"===Object(ne.a)(o)&&(o="string"===typeof o.value?o.value:"");var l={name:Object(L.e)(r),displayName:r.displayName,emailAddress:r.emailAddress,timeZone:o,imageUrl:r.avatarUrls["48x48"]||r.avatarUrls["32x32"],profileUrl:r.self,tickets:null,total:{},logClass:{},grandTotal:0},c=a.first((function(e){return e.userName===Object(L.e)(r,!0)}))||{};c.isCurrentUser&&(l.isCurrentUser=!0);var u=c.logData||[];l.tickets=u.groupBy((function(e){return e.ticketNo})).map((function(e){var t=e.values,a=t.first(),n={},r={ticketNo:e.key,parent:a.parent,parentUrl:a.parent?i(a.parent):null,epicDisplay:a.epicDisplay,epicUrl:a.epicUrl,issueType:a.issueType,statusName:a.statusName,summary:a.summary,originalestimate:a.originalestimate,remainingestimate:a.remainingestimate,totalLogged:a.totalLogged,estVariance:a.estVariance,url:a.url,logs:n,totalHours:0},s=0;return t.forEach((function(e){var t=e.logTime;o&&(t=j()(j()(t).tz(o).format("YYYY-MM-DD HH:mm:ss")).toDate());var a=t.format("yyyyMMdd"),r=n[a];r||(r=[],n[a]=r),r.push({logTime:t,totalHours:e.totalHours,comment:e.comment}),s+=e.totalHours})),r.totalHours=s,r}));var d=l.logClass,m=l.total,p=0;return n.forEach((function(e){var a=l.tickets.sum((function(t){var a=t.logs[e.prop];return a?a.sum((function(e){return e.totalHours})):0}));a>0&&(m[e.prop]=a,p+=a),d[e.prop]=t.getCssClass(e,a)})),l.grandTotal=p,l}));var o=r.total,l=0;return n.forEach((function(e){var t=r.users.sum((function(t){return t.total[e.prop]||0}));t>0&&(o[e.prop]=t,l+=t)})),r.grandTotal=l,r})),c=0,u={};return n.forEach((function(e){var t=l.sum((function(t){return t.total[e.prop]||0}));t>0&&(u[e.prop]=t,c+=t)})),l.grandTotal=c,l.total=u,l}},{key:"render",value:function(){var e=this.state.groupedData,t=this.props,a=t.months,n=t.dates,r=t.convertSecs,o=t.formatTime,i=t.breakupMode,s=t.pageSettings,l=t.addWorklog,c="2"===(null===s||void 0===s?void 0:s.logFormat)?"float":void 0;return k.a.createElement(K.c,{exportSheetName:"Grouped - [User daywise]"},k.a.createElement(K.e,null,k.a.createElement("tr",{className:"data-center pad-min auto-wrap"},k.a.createElement("th",{style:{minWidth:380},rowSpan:2},"User Details"),a.map((function(e,t){return k.a.createElement("th",{key:t,style:{minWidth:35},colSpan:e.days},e.monthName)})),k.a.createElement("th",{style:{minWidth:50},rowSpan:2},"Total Hours")),k.a.createElement("tr",{className:"pad-min auto-wrap"},n.map((function(e,t){return k.a.createElement("th",{key:t,style:{minWidth:35}},e.display)})))),k.a.createElement(K.d,null,e.map((function(e,t){return k.a.createElement(oe,{key:t,group:e,dates:n,addWorklog:l,convertSecs:r,timeExportFormat:c,formatTime:o,breakupMode:i,pageSettings:s})})),k.a.createElement("tr",{className:"grouped-row right auto-wrap"},k.a.createElement("td",null,"Grand Total ",k.a.createElement("i",{className:"fa fa-arrow-right"})),n.map((function(t,a){return k.a.createElement("td",{key:a,exportType:c},r(e.total[t.prop]))})),k.a.createElement("td",{exportType:c},r(e.grandTotal)))))}}]),a}(h.PureComponent),oe=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.toggleDisplay=function(){return e.setState({hidden:!e.state.hidden})},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.group,a=e.dates,n=e.convertSecs,r=e.formatTime,o=e.breakupMode,i=e.pageSettings,s=e.addWorklog,l=e.timeExportFormat,c=this.state.hidden;return k.a.createElement(k.a.Fragment,null,!c&&k.a.createElement("tr",{className:"grouped-row left",title:"Click to hide user details"},k.a.createElement("td",{colSpan:a.length+2,onClick:this.toggleDisplay},k.a.createElement("i",{className:"pull-left drill-down fa fa-chevron-circle-down"}),t.name)),!c&&t.users.map((function(e,t){return k.a.createElement(ie,{key:t,user:e,dates:a,breakupMode:o,addWorklog:s,timeExportFormat:l,convertSecs:n,formatTime:r,pageSettings:i})})),k.a.createElement("tr",{className:"grouped-row right auto-wrap",onClick:c?this.toggleDisplay:null},k.a.createElement("td",null,c&&k.a.createElement("div",null,k.a.createElement("i",{className:"pull-left drill-down fa fa-chevron-circle-right",title:"Click to show user details"}),k.a.createElement("span",{className:"pull-left"},t.name),k.a.createElement("span",{className:"pull-right"},"Total ",k.a.createElement("i",{className:"fa fa-arrow-right"}))),!c&&k.a.createElement("div",null,t.name," ",k.a.createElement("i",{className:"fa fa-arrow-right"})," Total ",k.a.createElement("i",{className:"fa fa-arrow-right"}))),a.map((function(e,a){return k.a.createElement("td",{key:a,exportType:l},n(t.total[e.prop]))})),k.a.createElement("td",{exportType:l},n(t.grandTotal))))}}]),a}(h.PureComponent),ie=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.getComments=function(t){return t&&0!==t.length?t.map((function(t){return"".concat(e.props.formatTime(t.logTime),"(").concat(e.props.convertSecs(t.totalHours),") - ").concat(t.comment)})).join(";\n"):""},e.toggleDisplay=function(){return e.setState({expanded:!e.state.expanded})},e.addWorklog=function(t,a){var n=e.props,r=n.user,o=n.addWorklog,i=a.date,s=a.prop;o(r,t,i,r.total[s])},e}return Object(u.a)(a,[{key:"getTotalTime",value:function(e){return e&&0!==e.length?e.sum((function(e){return e.totalHours})):""}},{key:"getLogEntries",value:function(e){var t=this;if(Array.isArray(e)&&e.length>0){var a=e.length>1?";":"";return e.map((function(e,n){return k.a.createElement("span",{key:n,title:"".concat(t.props.formatTime(e.logTime)," - ").concat(e.comment)},t.props.convertSecs(e.totalHours)+a)}))}}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.dates,r=t.convertSecs,o=t.breakupMode,i=t.pageSettings.hideEstimate,s=t.timeExportFormat,l=this.state.expanded;return k.a.createElement(k.a.Fragment,null,k.a.createElement("tr",{className:"pointer auto-wrap",onClick:this.toggleDisplay},k.a.createElement("td",{className:"data-left"},k.a.createElement("div",{className:"user-info",style:{paddingLeft:0}},k.a.createElement("i",{className:"pull-left drill-down fa ".concat(l?"fa-chevron-circle-down":"fa-chevron-circle-right"),title:"Click to toggle ticket details"}),k.a.createElement("img",{src:a.imageUrl,height:40,width:40,className:"pull-left",alt:a.displayName}),k.a.createElement("span",{className:"name"},a.displayName),k.a.createElement("span",{className:"email"},"(",a.emailAddress||a.name,a.timeZone&&k.a.createElement("span",null,", time zone: ",a.timeZone),")"))),n.map((function(t,n){return k.a.createElement("td",{key:n,className:"".concat(a.logClass[t.prop]," day-wl-block"),exportType:s},a.isCurrentUser&&k.a.createElement("span",{className:"fa fa-clock-o add-wl",title:"Click to add worklog",onClick:function(){return e.addWorklog(null,t)}}),r(a.total[t.prop]))})),k.a.createElement("td",{exportType:s},r(a.grandTotal))),l&&a.tickets.map((function(t,l){var c=r(t.originalestimate),u=r(t.remainingestimate),d=r(t.totalLogged)||0,m=(t.estVariance>0?"+":"")+(r(t.estVariance)||(t.originalestimate>0?0:"NA")),p="Original Estimate: ".concat(c||0,"\nRemaining: ").concat(u||0,"\nTotal Logged: ").concat(d,"\nEstimate Variance: ").concat(m);return k.a.createElement("tr",{key:l,className:"auto-wrap"},k.a.createElement("td",{className:"data-left"},t.parent&&k.a.createElement("a",{href:t.parentUrl,className:"link",target:"_blank",rel:"noopener noreferrer"},t.parent," - "),k.a.createElement("a",{href:t.url,className:"link",target:"_blank",rel:"noopener noreferrer"},t.ticketNo)," -",k.a.createElement("span",null,t.summary),k.a.createElement("strong",null," (",t.statusName,")"),!i&&!(!c&&!u)&&k.a.createElement("span",{className:"estimate",title:p},"(est: ",c||0," / rem: ",u||0," / log: ",d," / var: ",m,")")),n.map((function(n,i){return k.a.createElement("td",{key:i,className:"day-wl-block",exportType:s},a.isCurrentUser&&k.a.createElement("span",{className:"fa fa-clock-o add-wl",title:"Click to add worklog",onClick:function(){return e.addWorklog(t.ticketNo,n)}}),"2"!==o&&k.a.createElement("span",{title:e.getComments(t.logs[n.prop])},r(e.getTotalTime(t.logs[n.prop]))),"2"===o&&k.a.createElement("div",null," ",e.getLogEntries(t.logs[n.prop])))})),k.a.createElement("td",{exportType:s},r(t.totalHours)))})))}}]),a}(h.PureComponent),se=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return k.a.createElement("div",{className:"pad-15"},k.a.createElement("strong",null,"How to use:"),k.a.createElement("ul",null,k.a.createElement("li",null,"Choose a date for which you would like to view the report or click the refresh ( ",k.a.createElement("i",{className:"fa fa-refresh"})," ) icon to load the report if date is already selected."),k.a.createElement("li",null,"You can choose the list of users by clicking the ( ",k.a.createElement("i",{className:"fa fa-users"})," ) icon."),k.a.createElement("li",null,"Click on Settings ",k.a.createElement("i",{className:"fa fa-arrow-right"})," User groups from left hand menu to add users permenantly to a group and use it in future."),k.a.createElement("li",null,"Click on ( ",k.a.createElement("i",{className:"fa fa-cogs"})," ) icon to change the settings of the report."),k.a.createElement("li",null,"Time zone settings - Configure the time zone of each user & group properly while adding in group and select appropriate option in settings as well."),k.a.createElement("li",null,"You have additional settings affecting this report in Settings ",k.a.createElement("i",{className:"fa fa-arrow-right"}),"General menu in left hand side.")),k.a.createElement("p",null,k.a.createElement("strong",null,"Note:")," Any changes you make to the group or the users under the group in this page will not get saved and is only for this session."),k.a.createElement("div",null,k.a.createElement("strong",null,"Planned enhancements:")," Some of the enhancements in roadmap for this reports are as follows",k.a.createElement("ul",null,k.a.createElement("li",null,"Viewing report based on sprint as an additional option alternate for date selection"),k.a.createElement("li",null,"Add custom columns to the report"))))}}]),a}(h.PureComponent),le=(a(275),function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),n=t.call(this,e);var r=e.groups,o=e.flatData;return n.state=n.getGroupedData(r,o),n}return Object(u.a)(a,[{key:"getGroupedData",value:function(e,t){var a=[],n={},r=t.groupBy((function(e){return e.username})).reduce((function(e,t){return e[t.key]=t.values,e}),{});t.groupBy((function(e){return{key:e.projectKey,name:e.projectName}})).sortBy((function(e){return e.key.key})).forEach((function(e){var t=e.key,r=e.values;a.push(t),n[t.key]=r,t.issueTypes=r.distinct((function(e){return e.issueType}))}));var o=e.map((function(e){var t=e.name,o=e.users,i={grandTotal:0,projects:{}},s={name:t,overallTotal:i};return s.users=o.map((function(e){var t=Object(L.e)(e),o=e.emailAddress,s=e.displayName,l={name:t,emailAddress:o,displayName:s};l.projects=a.reduce((function(e,a){var r=i.projects[a.key]||{total:0};i.projects[a.key]=r;var o=n[a.key];if(o){var s=o.filter((function(e){return e.username===t}));if(s.length){var l=s.groupBy((function(e){return e.issueType})).reduce((function(e,t){var a=t.values.sum((function(e){return e.timeSpent}))||0;return e[t.key]={total:a,logs:t.values},r[t.key]=(r[t.key]||0)+a,e}),{});l.grandTotal={total:s.sum((function(e){return e.timeSpent})),logs:s},r.total+=l.grandTotal.total||0,e[a.key]=l}}return e}),{});var c=r[t]||[];return l.grandTotal={total:c.sum((function(e){return e.timeSpent})),logs:c},i.grandTotal+=l.grandTotal.total,l})),s})),i=o.reduce((function(e,t){var n=t.overallTotal,r=n.grandTotal,o=n.projects;return e.grandTotal=(e.grandTotal||0)+r,a.forEach((function(t){var a=o[t.key]||{},n=e[t.key]||{total:0};e[t.key]=n,n.total+=a.total||0,t.issueTypes.forEach((function(e){var t=a[e]||0;n[e]=(n[e]||0)+t}))})),e}),{grandTotal:0});return{projects:a,projectsData:n,groupedData:o,grandTotal:i}}},{key:"render",value:function(){var e=this.props.convertSecs,t=this.state,a=t.projects,n=t.groupedData,r=t.grandTotal;return k.a.createElement(K.c,{dataset:n,exportSheetName:"Summary - [User project wise]"},k.a.createElement(K.e,null,k.a.createElement(K.f,null,k.a.createElement(K.a,{rowSpan:2},"Group Name"),k.a.createElement(K.a,{rowSpan:2},"User Name"),a.map((function(e){return k.a.createElement(K.a,{key:e.key,colSpan:e.issueTypes.length+1},e.name)})),k.a.createElement(K.a,{rowSpan:2},"Grand Total")),k.a.createElement(K.f,null,a.map((function(e,t){return k.a.createElement(h.Fragment,{key:t},e.issueTypes.map((function(e,t){return k.a.createElement(K.a,{key:t},e)})),k.a.createElement(K.a,null,"Total"))})))),k.a.createElement(K.d,null,(function(t,n){return k.a.createElement(h.Fragment,{key:n},t.users.map((function(n,r){return k.a.createElement("tr",{key:r},0===r&&k.a.createElement("td",{rowSpan:t.users.length+1},t.name),k.a.createElement("td",null,n.displayName),a.map((function(t,a){var r=n.projects[t.key]||{};return k.a.createElement(h.Fragment,{key:a},t.issueTypes.map((function(t,a){var n=r[t];return k.a.createElement("td",{key:a,className:"data-center",exportType:"float"},n?e(n.total):null)})),k.a.createElement("td",{className:"strong data-center",exportType:"float"},r.grandTotal?e(r.grandTotal.total):null))})),k.a.createElement("td",{className:"strong data-center",exportType:"float"},e(n.grandTotal.total)))})),k.a.createElement("tr",{className:"strong data-center"},k.a.createElement("td",{className:"data-right"},"Group Total ",k.a.createElement("span",{className:"fa fa-arrow-right"})),a.map((function(a,n){var r=t.overallTotal.projects[a.key]||{};return k.a.createElement(h.Fragment,{key:n},a.issueTypes.map((function(t,a){return k.a.createElement("td",{key:a,exportType:"float"},e(r[t]))})),k.a.createElement("td",{exportType:"float"},e(r.total)))})),k.a.createElement("td",{exportType:"float"},e(t.overallTotal.grandTotal))))})),k.a.createElement("tfoot",null,k.a.createElement("tr",{className:"strong data-center"},k.a.createElement("td",{colSpan:2,className:"data-right"},"Grand total ",k.a.createElement("span",{className:"fa fa-arrow-right"})),a.map((function(t,a){return k.a.createElement(h.Fragment,{key:a},t.issueTypes.map((function(a,n){return k.a.createElement("td",{key:n,exportType:"float"},e(r[t.key][a]))})),k.a.createElement("td",{exportType:"float"},e(r[t.key].total)))})),k.a.createElement("td",{exportType:"float"},e(r.grandTotal)))),k.a.createElement(K.b,{span:11},"No worklog details available"))}}]),a}(h.PureComponent)),ce=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e,"Worklog Report","fa-list-alt")).dateSelected=function(e){e&&e.fromDate&&e.toDate&&n.setState({dateRange:e},n.refreshData)},n.refreshData=function(){var e=n.state.groups;if(e&&0!==e.length){n.userList=e.union((function(e){return e.users.forEach((function(t){return t.groupName=e.name})),e.users}));var t={userList:n.userList.map((function(e){return Object(L.e)(e,!0)})),fromDate:n.state.dateRange.fromDate,toDate:n.state.dateRange.toDate};n.setState({isLoading:!0}),n.getDayWiseReportData(t).then((function(e){n.$analytics.trackEvent("Worklog report viewed",P.i.UserActions),n.rawData=e,n.generateFlatData(e),n.setState({isLoading:!1}),n.onResize({target:window})}))}else n.$message.warning("User list need to be added before generating report","Missing input")},n.showGroupsPopup=function(){return n.setState({showGroupsPopup:!0})},n.showSettings=function(){return n.setState({showSettings:!0})},n.groupsChanged=function(e){var t={showGroupsPopup:!1};e&&Array.isArray(e)&&(t.groups=e),n.setState(t)},n.settingsChanged=function(e){e||(e=n.state.pageSettings),n.setState({showSettings:!1,pageSettings:e})},n.groupSettingsChanged=function(e){var t=e.groupBy,a=e.groupFoldable,r=e.displayColumns,o=e.sortField,i=e.isDesc,s=n.state.pageSettings;s=Object(l.a)(Object(l.a)({},s),{},{flatTableSettings:{groupBy:t,groupFoldable:a,displayColumns:r,sortField:o,isDesc:i}}),n.$config.saveSettings("reports_UserDayWise",s),n.settingsChanged(s)},n.addWorklog=function(e,t,a,r){var o=(n.maxSecsPerDay||0)-(r||0);o<60&&(o="01:00"),n.worklogItem={ticketNo:t,dateStarted:a,timeSpent:o},n.setState({showWorklogPopup:!0})},n.worklogAdded=function(e){var t=e.added.sourceObject;console.log("Worklog added: ",t)},n.hideWorklog=function(){n.worklogItem=null,n.setState({showWorklogPopup:!1})},n.convertSecs=function(e){return n.$utils.convertSecs(e,{format:"1"===n.state.pageSettings.logFormat})},n.formatTime=function(e){return n.$userutils.formatTime(e)},n.formatDateTime=function(e){return n.$userutils.formatDateTime(e)},Object(z.b)(Object(d.a)(n),"SessionService","CacheService","UtilsService","UserUtilsService","JiraService","MessageService","ConfigService","UserGroupService","AnalyticsService");var r=n.$session.pageSettings.reports_UserDayWise;r.timeZone||(r.timeZone="1"),n.state.dateRange={},n.state.pageSettings=r;var o=n.$session.CurrentUser,i=o.maxHours,s=o.epicNameField,u=o.name;return n.currentUserName=u.toLowerCase(),n.maxSecsPerDay=60*(i||8)*60,n.epicNameField=(s||{}).id,n}return Object(u.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.$usergroup.getUserGroups().then((function(t){return e.setState({groups:t})}))}},{key:"getDayWiseReportData",value:function(e){var t=this,a=e.userList.distinct(),n=j()(e.fromDate).startOf("day"),r=j()(e.toDate).endOf("day"),o=n.toDate(),i=r.toDate(),s=this.getDateArray(o,i);this.dates=s.map((function(e){return{prop:e.format("yyyyMMdd"),display:e.format("DDD, dd"),date:e,isHoliday:t.$userutils.isHoliday(e)}})),this.months=s.groupBy((function(e){return e.format("MMM, yyyy")})).map((function(e){return{monthName:e.key,days:e.values.length}}));var l=this.state.pageSettings.hideEstimate,c=(this.state.pageSettings.jql||"").trim();c&&(c=" AND (".concat(c,")"));var u='worklogAuthor in ("'.concat(a.join('","'),"\") and worklogDate >= '").concat(n.clone().add(-1,"days").format("YYYY-MM-DD"),"' and worklogDate < '").concat(r.clone().add(1,"days").format("YYYY-MM-DD"),"'").concat(c),d=["summary","worklog","issuetype","parent","project","status"];l||(d.push("timeoriginalestimate"),d.push("timeestimate"));var m=this.epicNameField;return m&&d.push(m),this.$jira.searchTickets(u,d).then((function(e){for(var n=a.map((function(e){var a={logData:[],userName:e.toLowerCase()};return a.userName===t.currentUserName&&(a.isCurrentUser=!0),a})),r={},s=0;s<n.length;s++){var l=n[s];r[l.userName]=l}for(var c=0;c<e.length;c++)for(var u=e[c],d=u.fields||{},p=(d.worklog||{}).worklogs||[],g=p.sum((function(e){return e.timeSpentSeconds})),f=d.timeoriginalestimate||0,h=d.timeestimate||0,k=f>0?h+g-f:0,v=0;v<p.length;v++){var y=p[v],E=j()(y.started).toDate(),b=j()(y.started).startOf("day").toDate();if(b.getTime()>=o.getTime()&&b.getTime()<=i.getTime()){var w=r[Object(L.e)(y.author,!0)];if(w){var S={ticketNo:u.key,epicDisplay:null,epicUrl:null,url:t.$userutils.getTicketUrl(u.key),issueType:(d.issuetype||"").name,parent:(d.parent||"").key,summary:d.summary,originalestimate:f,remainingestimate:h,totalLogged:g,estVariance:k,logTime:E,comment:y.comment,projectName:d.project.name,statusName:(d.status||{}).name,projectKey:d.project.key,totalHours:y.timeSpentSeconds};if(m){S.epicDisplay=d[m];var N=S.ticketNo.split("-")[0];S.epicDisplay&&0===S.epicDisplay.indexOf("".concat(N,"-"))&&(S.epicUrl=t.$userutils.getTicketUrl(S.epicDisplay))}w.logData.push(S)}}}for(var C=0;C<n.length;C++){var T=n[C];T.totalHours=T.logData.sum((function(e){return e.totalHours}))}return n}))}},{key:"generateFlatData",value:function(e){var t=this;this.flatData=this.state.groups.union((function(a){var n=a.name;return a.users.union((function(a){var r=a.displayName;return e.first((function(e){return e.userName===Object(L.e)(a,!0)})).logData.map((function(e){return{groupName:n,username:Object(L.e)(a),userDisplay:r,parent:e.parent,parentUrl:e.parent?t.$userutils.getTicketUrl(e.parent):null,epicDisplay:e.epicDisplay,epicUrl:e.epicUrl,ticketNo:e.ticketNo,ticketUrl:e.url,issueType:e.issueType,summary:e.summary,projectKey:e.projectKey,projectName:e.projectName,statusName:e.statusName,logTime:e.logTime,timeSpent:e.totalHours,originalestimate:e.originalestimate,remainingestimate:e.remainingestimate,totalLogged:e.totalLogged,estVariance:e.estVariance,comment:e.comment}}))}))}))}},{key:"getDateArray",value:function(e,t){for(var a=[],n=new Date(e);n<=t;)a.push(new Date(n)),n=n.addDays(1);return a}},{key:"renderCustomActions",value:function(){var e=this.state.dateRange;return k.a.createElement(k.a.Fragment,null,k.a.createElement(I.e,{value:e,range:!0,onChange:this.dateSelected,style:{marginRight:"35px"}}),k.a.createElement(I.b,{icon:"fa fa-users",onClick:this.showGroupsPopup,title:"Add users / groups to report"}),k.a.createElement(I.b,{icon:"fa fa-cogs",onClick:this.showSettings,title:"Show settings"}))}},{key:"render",value:function(){var e=this.months,t=this.dates,n=this.convertSecs,r=this.formatTime,o=this.formatDateTime,i=this.rawData,s=this.flatData,l=void 0===s?[]:s,c=this.state,u=c.isLoading,d=c.showGroupsPopup,m=c.showWorklogPopup,p=c.showSettings,h=c.groups,v=c.pageSettings,y=void 0===v?{}:v,E=y.breakupMode,b="".concat(y._uniqueId,"_").concat(l._uniqueId);return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement("div",{className:"worklog-gadget-container"},!i&&!u&&k.a.createElement(se,null),u&&k.a.createElement("div",{className:"pad-15"},"Loading... please wait while the report is being loaded. It may take few seconds / minute based on the range you had selected."),i&&k.a.createElement(X.TabView,{className:"no-padding",renderActiveOnly:!1},k.a.createElement(X.TabPanel,{header:"Grouped - [User daywise]",contentClassName:"no-padding"},i&&k.a.createElement(re,{rawData:i,groups:h,dates:t,months:e,pageSettings:y,convertSecs:n,formatTime:r,breakupMode:E,getTicketUrl:this.$userutils.getTicketUrl,maxSecsPerDay:this.maxSecsPerDay,addWorklog:this.addWorklog})),k.a.createElement(X.TabPanel,{header:"Summary - [User project wise]"},l&&k.a.createElement(le,{key:b,groups:h,flatData:l,formatDateTime:o,convertSecs:n})),k.a.createElement(X.TabPanel,{header:"Flat (Groupable)"},l&&k.a.createElement(ae,{key:b,flatData:l,formatDateTime:o,convertSecs:n,pageSettings:y,onChange:this.groupSettingsChanged}))),d&&k.a.createElement(Q.a,{groups:h,onHide:this.groupsChanged}),p&&k.a.createElement(ee,{pageSettings:y,onHide:this.settingsChanged}),m&&k.a.createElement(x.a,{worklog:this.worklogItem,onDone:this.worklogAdded,onHide:this.hideWorklog,uploadImmediately:!0})))}}]),a}(E.b),ue=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"Add Bookmark")).addBookmark=function(){var e=n.state.ticketsList;e.length>0?(n.setState({isLoading:!0}),n.$bookmark.addBookmark(e).then((function(t){0===t.length?n.onHide(!0):(n.setState({isLoading:!1,ticketsList:t}),e.length===t.length?n.$message.warning("None of the ticket numbers provided are valid."):e.length>t.length&&n.$message.warning("Some of the ticket numbers provided are not valid."))}))):n.onHide()},n.listChanged=function(e){return n.setState({ticketsList:e})},Object(z.b)(Object(d.a)(n),"BookmarkService","MessageService"),n.style.width="380px",n.state.ticketsList=[],n}return Object(u.a)(a,[{key:"getFooter",value:function(){return k.a.createElement(k.a.Fragment,null,k.a.createElement(I.b,{type:"primary",onClick:this.addBookmark,label:"Save"}),k.a.createElement(I.b,{type:"default",onClick:this.onHide,label:"Cancel"}))}},{key:"render",value:function(){var e=this.state.ticketsList;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement("div",{className:"pad-22"},k.a.createElement(I.g,{value:e,onChange:this.listChanged,placeholder:"Enter one or more ticket numbers"}),k.a.createElement("strong",null,"Note:")," Press enter key to add multiple items"))}}]),a}(A.a),de=a(249),me=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"My Bookmarks","fa-bookmark")).refreshData=function(){n.setState({isLoading:!0,showAddPopup:!1}),n.$bookmark.getBookmarks().then((function(e){var t=n.state.selAllChk;e.forEach((function(e){e.ticketUrl=n.$userutils.getTicketUrl(e.ticketNo),e.selected=t,e.rowClass=n.$utils.getRowStatus(e)})),n.setState({isLoading:!1,bookmarksList:e})}))},n.selectAll=function(e){var t=n.state.bookmarksList;(t=Object(r.a)(t)).forEach((function(t){return t.selected=e})),n.setState({selAllChk:e,bookmarksList:t})},n.showAddPopup=function(){return n.setState({showAddPopup:!0})},n.hideAddPopup=function(e){e?n.refreshData():n.setState({showAddPopup:!1})},Object(b.a)(Object(d.a)(n),"JiraService","BookmarkService","UtilsService","UserUtilsService","MessageService"),n.contextMenu=[{label:"Select Bookmark",icon:"fa fa-check-square-o",command:function(){return n.selectTicket(n.selectedTicket)}},{label:"Add worklog",icon:"fa fa-clock-o",command:function(){return n.addWorklogOn(n.selectedTicket.ticketNo)}},{label:"Delete Bookmark",icon:"fa fa-trash-o",command:function(){return n.deleteBookmark(n.selectedTicket.ticketNo)}}],n.state.selAllBks=!1,n.state.bookmarksList=[],n}return Object(u.a)(a,[{key:"selectTicket",value:function(e){e.selected=!e.selected;var t=this.state.bookmarksList;t=Object(r.a)(t),this.setState({bookmarksList:t})}},{key:"UNSAFE_componentWillMount",value:function(){this.refreshData()}},{key:"showContext",value:function(e,t){this.selectedTicket=t,Object(W.showContextMenu)(e,this.contextMenu)}},{key:"deleteBookmark",value:function(e){var t,a=this;0!==(t=e?[e]:this.state.bookmarksList.filter((function(e){return e.selected})).map((function(e){return e.ticketNo}))).length?de.b.confirmDelete("Are you sure to delete the selected bookmark(s)?","Confirm delete bookmark(s)").then((function(){a.setState({isLoading:!0}),a.$bookmark.removeBookmark(t).then((function(e){a.setState({bookmarksList:e,isLoading:!1})}))})):this.$message.info("Select the bookmarks to be deleted!")}},{key:"executeEvent",value:function(e){e.type===n.a.TicketBookmarked?this.refreshData():Object(g.a)(Object(f.a)(a.prototype),"executeEvent",this).call(this,e)}},{key:"renderCustomActions",value:function(){var e=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement(I.b,{icon:"fa fa-plus",onClick:this.showAddPopup,title:"Add ticket to bookmarks"}),k.a.createElement(I.b,{type:"danger",icon:"fa fa-trash-o",onClick:function(){return e.deleteBookmark()},title:"Remove selected ticket(s) from bookmarks"}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.bookmarksList,r=t.selAllChk,o=t.showAddPopup;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement(k.a.Fragment,null,k.a.createElement(K.c,{dataset:n,exportSheetName:"My bookmarks"},k.a.createElement(K.e,null,k.a.createElement("tr",null,k.a.createElement(K.a,{className:"w40",noExport:!0},k.a.createElement(I.c,{checked:r,onChange:this.selectAll})),k.a.createElement(K.a,{sortBy:"ticketNo"},"Ticket No"),k.a.createElement(K.a,{sortBy:"issuetype"},"Type"),k.a.createElement(K.a,{sortBy:"summary"},"Summary"),k.a.createElement(K.a,{sortBy:"assigneeName"},"Assignee"),k.a.createElement(K.a,{sortBy:"reporter"},"Reporter"),k.a.createElement(K.a,{sortBy:"priority"},"Priority"),k.a.createElement(K.a,{sortBy:"status"},"Status"),k.a.createElement(K.a,{sortBy:"resolution"},"Resolution"),k.a.createElement(K.a,{sortBy:"createdSortable"},"Created"),k.a.createElement(K.a,{sortBy:"updatedSortable"},"Updated"))),k.a.createElement(K.d,null,(function(t,a){return k.a.createElement("tr",{key:t.ticketNo,onContextMenu:function(a){return e.showContext(a,t)},className:t.rowClass},k.a.createElement("td",{className:"text-center"},t.selected&&k.a.createElement(I.c,{checked:!0,onChange:function(){return e.selectTicket(t)}}),!t.selected&&k.a.createElement("i",{className:"fa fa-ellipsis-v",onClick:function(a){return e.showContext(a,t)}})),k.a.createElement("td",null,k.a.createElement("a",{href:t.ticketUrl,rel:"noopener noreferrer",className:"link strike",target:"_blank"},t.ticketNo)),k.a.createElement("td",null,t.issuetypeIcon&&k.a.createElement(I.f,{src:t.issuetypeIcon}),t.issuetype),k.a.createElement("td",null,t.summary),k.a.createElement("td",null,t.assigneeName),k.a.createElement("td",null,t.reporterName),k.a.createElement("td",null,t.priorityIcon&&k.a.createElement(I.f,{src:t.priorityIcon}),t.priority),k.a.createElement("td",null,t.statusIcon&&k.a.createElement(I.f,{src:t.statusIcon}),t.status),k.a.createElement("td",null,t.resolutionIcon&&k.a.createElement(I.f,{src:t.resolutionIcon}),t.resolution),k.a.createElement("td",null,t.created),k.a.createElement("td",null,t.updated))})),k.a.createElement(K.b,{span:11},"You have not yet bookmarked any tickets. Bookmark your frequently used tickets")),o&&k.a.createElement(ue,{onHide:this.hideAddPopup})))}}]),a}(E.b),pe=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"My open tickets","fa-eye")).refreshData=function(e){n.setState({isLoading:!0}),n.$jira.getOpenTickets(e).then((function(e){var t=e.map((function(e){var t=e.fields;return{ticketNo:e.key,ticketUrl:n.$userutils.getTicketUrl(e.key),issuetypeIcon:(t.issuetype||{}).iconUrl,issuetype:(t.issuetype||{}).name,summary:t.summary,reporter:(t.reporter||{}).displayName,priorityIcon:(t.priority||{}).iconUrl,priority:(t.priority||{}).name,statusIcon:(t.status||{}).iconUrl,status:(t.status||{}).name,resolutionIcon:(t.resolution||{}).iconUrl,resolution:(t.resolution||{}).name,createdSortable:t.created,updatedSortable:t.updated,created:n.$userutils.formatDateTime(t.created),updated:n.$userutils.formatDateTime(t.updated)}}));n.setState({ticketList:t,isLoading:!1})}))},n.bookmarkAdded=function(){return n.performAction(E.a.TicketBookmarked)},Object(b.a)(Object(d.a)(n),"JiraService","BookmarkService","UserUtilsService"),n.state.isLoading=!0,n.state.ticketList=[],n}return Object(u.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.refreshData()}},{key:"render",value:function(){var e=this,t=this.state.ticketList;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement(K.c,{dataset:t,exportSheetName:"My open tickets"},k.a.createElement(K.e,null,k.a.createElement("tr",null,k.a.createElement(K.a,{sortBy:"ticketNo"},"Ticket No"),k.a.createElement(K.a,{sortBy:"issuetype"},"Type"),k.a.createElement(K.a,{sortBy:"summary"},"Summary"),k.a.createElement(K.a,{sortBy:"reporter"},"Reporter"),k.a.createElement(K.a,{sortBy:"priority"},"Priority"),k.a.createElement(K.a,{sortBy:"status"},"Status"),k.a.createElement(K.a,{sortBy:"resolution"},"Resolution"),k.a.createElement(K.a,{sortBy:"createdSortable"},"Created"),k.a.createElement(K.a,{sortBy:"updatedSortable"},"Updated"))),k.a.createElement(K.d,null,(function(t,a){return k.a.createElement(ge,{key:a,ticket:t,onAddWorklog:e.addWorklogOn,onBookmark:e.bookmarkAdded})})),k.a.createElement(K.b,{span:9},"No open tickets were assigned to you. Enjoy your day!")))}},{key:"showContext",value:function(e,t){this.selectedTicket=t,Object(W.showContextMenu)(e,this.contextMenu)}}]),a}(E.b),ge=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).setRef=function(t){return e.keyCtr=t},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.ticket,n=t.onAddWorklog,r=t.onBookmark;return k.a.createElement("tr",{onContextMenu:function(t){return e.keyCtr.showContext(t)}},k.a.createElement(H.i,{ref:this.setRef,value:a.ticketNo,onAddWorklog:n,onBookmark:r}),k.a.createElement("td",null,k.a.createElement(I.f,{src:a.issuetypeIcon}),a.issuetype),k.a.createElement("td",null,a.summary),k.a.createElement("td",null,a.reporter),k.a.createElement("td",null,k.a.createElement(I.f,{src:a.priorityIcon}),a.priority),k.a.createElement("td",null,k.a.createElement(I.f,{src:a.statusIcon}),a.status),k.a.createElement("td",null,a.resolutionIcon&&k.a.createElement(I.f,{src:a.resolutionIcon}),a.resolution),k.a.createElement("td",null,a.created),k.a.createElement("td",null,a.updated))}}]),a}(h.PureComponent),fe=pe,he=a(75),ke=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"My Reports","fa-filter")).refreshData=function(){n.setState({isLoading:!0}),n.$report.getReportsList().then((function(e){var t=n.state.selAllChk;e.forEach((function(e){e.selected=t,e.displayDate=n.$userutils.formatDateTime(e.dateCreated),e.sortDate=e.dateCreated.getTime()})),n.setState({reportsList:e,isLoading:!1})}))},n.deleteSelectedReports=function(){var e=n.state.reportsList.filter((function(e){return e.selected})).map((function(e){return e.id}));0!==e.length?de.b.confirmDelete("Are you sure to delete the selected report(s)?","Confirm delete report(s)").then((function(){n.setState({isLoading:!0}),n.$report.deleteSavedQuery(e).then((function(){return n.refreshData()}))})):n.$message.info("Select the reports to be deleted!")},n.selectAll=function(){var e=n.state,t=e.reportsList,a=e.selAllChk;a=!a,t.forEach((function(e){return e.selected=a})),t=Object(r.a)(t),n.setState({reportsList:t,selAllChk:a,selReportsCount:a?t.length:null})},n.downloadReports=function(){var e=n.state.reportsList.filter((function(e){return e.selected})).map((function(e){return e.id}));0!==e.length?n.$report.exportQueries(e):n.$message.info("Select the reports to be exported!")},n.fileSelected=function(){var e=n.fileSelector,t=e.files[0];if(t){if(!t.name.endsWith(".jrd"))return n.$message.warning("Unknown file selected to import. Select a valid Jira Assist Report definition (*.jrd) file"),void(e.value="");var a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=function(e){var t=e.target.result;try{var a=JSON.parse(t).reports;if(!a||!Array.isArray(a))return void n.$message.error("Selected file is invalid or is corrupted");a.forEach((function(e){e.oldName=e.queryName,e.selected=!0,e.status="Will import"})),n.setState({reportsToImport:a})}catch(r){n.$message.error("Selected file is invalid or is corrupted")}},a.onerror=function(e){n.$message.error("Selected file is invalid or is corrupted. Unable to load the file!")}}e.value=""},n.editReport=function(e){n.context.navigate("/reports/".concat(e.advanced?"advanced":e.isNew?"custom":"customgrouped","/").concat(e.id),!0)},n.hideImportPopup=function(e){e&&n.refreshData(),n.setState({reportsToImport:null})},n.setFileSelector=function(e){return n.fileSelector=e},n.chooseFileForImport=function(){return n.fileSelector.click()},Object(b.a)(Object(d.a)(n),"ReportService","MessageService","UserUtils"),n.state.isLoading=!0,n}return Object(u.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.refreshData()}},{key:"selectRowItem",value:function(e){e.selected=!e.selected;var t=this.state.reportsList,a=(t=Object(r.a)(t)).count((function(e){return e.selected}));this.setState({reportsList:t,selReportsCount:a})}},{key:"renderCustomActions",value:function(){return k.a.createElement(k.a.Fragment,null,k.a.createElement("input",{ref:this.setFileSelector,type:"file",className:"hide",accept:".jrd",onChange:this.fileSelected}),k.a.createElement(I.b,{icon:"fa fa-upload",onClick:this.chooseFileForImport,title:"Import reports shared by others"}),k.a.createElement(I.b,{icon:"fa fa-download",disabled:!this.state.selReportsCount,onClick:this.downloadReports,title:"Export reports to share with others"}),k.a.createElement(I.b,{type:"danger",icon:"fa fa-trash-o",onClick:this.deleteSelectedReports,title:"Delete selected report(s)"}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.reportsList,r=t.selAllChk,o=t.reportsToImport;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement(k.a.Fragment,null,k.a.createElement(K.c,{dataset:n,exportSheetName:"My reports"},k.a.createElement(K.e,null,k.a.createElement("tr",null,k.a.createElement(K.a,{className:"w40"},k.a.createElement(I.c,{checked:r,onChange:this.selectAll})),k.a.createElement(K.a,{sortBy:"queryName"},"Report name"),k.a.createElement(K.a,{sortBy:"sortDate"},"Created On"),k.a.createElement(K.a,{sortBy:"advanced"},"Report type"),k.a.createElement(K.a,{sortBy:"outputCount"},"Output fields"),k.a.createElement(K.a,null,"Options"))),k.a.createElement(K.d,null,(function(t){return k.a.createElement("tr",{key:t.id},k.a.createElement("td",{className:"text-center"},k.a.createElement(I.c,{checked:t.selected,onChange:function(){return e.selectRowItem(t)}})),k.a.createElement("td",null,t.queryName),k.a.createElement("td",null,t.displayDate),k.a.createElement("td",null,t.advanced?"Advanced report":"Custom Report".concat(t.isNew?"":" (old)")),k.a.createElement("td",null,t.outputCount),k.a.createElement("td",{className:"text-center"},k.a.createElement(I.b,{icon:"fa fa-edit",onClick:function(){return e.editReport(t)},title:"Click to edit this report"})))})),k.a.createElement(K.b,{span:7},"You have not yet created or imported any reports.")),o&&k.a.createElement(ye,{reportsToImport:o,onHide:this.hideImportPopup})))}}]),a}(E.b);ke.contextType=he.a;var ve=ke,ye=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"Select reports to import")).selectAllReports=function(){var e=n.state,t=e.selectAll,a=e.reportsToImport;t=!t,(a=Object(r.a)(a)).forEach((function(e){e.selected=!e.disabled&&t,n.updateReportStatus(e)})),n.setState({selectAll:t,reportsToImport:a,selReportsCount:n.getReportsCount(a)})},n.getReportsCount=function(e){return(e||n.state.reportsToImport).filter((function(e){return e.selected})).length},n.importReports=function(){var e=n.state.reportsToImport.filter((function(e){return e.selected})),t=e.map((function(e){var t=Object(l.a)({},e);return delete t.selected,delete t.id,delete t.oldName,delete t.status,n.$report.saveQuery(t).then((function(t){return e.selected=!1,e.disabled=!0,e.status="Imported",!0}),(function(){return e.status="Duplicate name",!1}))}));Promise.all(t).then((function(t){if(t.all((function(e){return e})))n.$message.success("".concat(e.length," selected reports were imported"),"Reports imported"),n.onHide(!0);else{n.$message.error("Some of the reports were not import!","Import failed");var a=n.state.reportsToImport;a=Object(r.a)(a),n.setState({selReportsCount:n.getReportsCount(a),reportsToImport:a})}}))},Object(b.a)(Object(d.a)(n),"UserUtilsService","MessageService","ReportService"),n.style={width:"850px"},n.state.selectAll=!0,n.state.reportsToImport=n.props.reportsToImport,n.state.selReportsCount=n.getReportsCount(),n}return Object(u.a)(a,[{key:"reportSelected",value:function(e){e.selected=!e.selected,this.updateReportStatus(e),this.setState({selReportsCount:this.getReportsCount()})}},{key:"updateReportStatus",value:function(e){e.selected?(e.queryName||(e.queryName=e.oldName),e.status="Will import"):e.status="Excluded"}},{key:"reportNameChanged",value:function(e,t){e.queryName=t,e.queryName?e.status="Will import":e.status="Name required",this.forceUpdate()}},{key:"getFooter",value:function(){var e=this.state.selReportsCount;return k.a.createElement(k.a.Fragment,null,k.a.createElement(I.b,{icon:"fa fa-times",onClick:this.onHide,label:"Cancel",type:"default"}),k.a.createElement(I.b,{icon:"fa fa-check",disabled:!e,onClick:this.importReports,label:"Import",type:"primary"}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.reportsToImport,r=t.selectAll;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement("div",null,k.a.createElement(K.c,{dataset:n},k.a.createElement("caption",null,"Select all the reports which you would like to import and provide a name for the report to import."),k.a.createElement(K.e,null,k.a.createElement("tr",null,k.a.createElement("th",{className:"no-min-width no-pad"},k.a.createElement(I.c,{checked:r,onChange:this.selectAllReports})),k.a.createElement("th",null,"Report name"),k.a.createElement("th",null,"Report name (new)"),k.a.createElement("th",null,"Created date"),k.a.createElement("th",null,"Last modified date"),k.a.createElement("th",null,"Status"))),k.a.createElement(K.d,null,(function(t,a){return k.a.createElement("tr",{key:"".concat(a,"_").concat(t.status)},k.a.createElement("td",{className:"data-center"},k.a.createElement(I.c,{checked:t.selected,disabled:t.disabled,onChange:function(a){return e.reportSelected(t,a)}})),k.a.createElement("td",null,t.oldName),k.a.createElement("td",null,k.a.createElement(I.j,{value:t.queryName,disabled:t.disabled||!t.selected,onChange:function(a){return e.reportNameChanged(t,a)}})),k.a.createElement("td",null,e.$userutils.formatDateTime(t.dateCreated)),k.a.createElement("td",null,e.$userutils.formatDateTime(t.dateUpdated)),k.a.createElement("td",null,t.status))})))))}}]),a}(A.a),Ee=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"Worklog - [Pending upload]","fa-clock-o")).refreshData=function(){return n.setState({isLoading:!0}),n.$worklog.getPendingWorklogs().then((function(e){var t=n.state.selAllChk;e.forEach((function(e){e.ticketUrl=n.$userutils.getTicketUrl(e.ticketNo),e.rowClass=n.$utils.getRowStatus(e),e.displayDate=n.$userutils.formatDateTime(e.dateStarted),e.selected=t,e.timeSpent=n.$utils.formatTs(e.timeSpent),e.overrideTimeSpent=n.$utils.formatTs(e.overrideTimeSpent)})),n.setState({isLoading:!1,worklogs:e})}))},n.selectAll=function(e){var t=n.state.worklogs;t.forEach((function(t){return t.selected=e})),n.setState({worklogs:Object(r.a)(t),selAllChk:e})},Object(b.a)(Object(d.a)(n),"WorklogService","UtilsService","UserUtilsService","MessageService"),n.contextMenu=[{label:"Select worklog",icon:"fa fa-check-square-o",command:function(){return n.selectRowItem(n.selectedItem)}},{label:"Edit worklog",icon:"fa fa-edit",command:function(){return n.editWorklogObj()}},{label:"Copy worklog",icon:"fa fa-copy",command:function(){return n.editWorklogObj(!0)}},{label:"Upload worklog",icon:"fa fa-upload",command:function(){return n.uploadWorklog([n.selectedItem])}},{label:"Delete worklog",icon:"fa fa-trash-o",command:function(){return n.deleteWorklog([n.selectedItem])}}],n.state.selAllChk=!0,n.state.isLoading=!0,n}return Object(u.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.refreshData()}},{key:"editWorklogObj",value:function(e){var t=Object.create(this.selectedItem);t.copy=e,this.addWorklog(t)}},{key:"showContext",value:function(e,t){this.selectedItem=t,Object(W.showContextMenu)(e,this.contextMenu)}},{key:"uploadWorklog",value:function(e){var t=this;e||(e=this.state.worklogs.filter((function(e){return e.selected})));var n=e.map((function(e){return e.id}));0!==n.length?(this.setState({isLoading:!0}),this.$worklog.uploadWorklogs(n).then((function(e){t.setState({isLoading:!1,worklogs:e}),Object(g.a)(Object(f.a)(a.prototype),"performAction",t).call(t,E.a.WorklogModified)}),(function(e){e&&e.$message&&t.$message.warning(e.message),t.refreshData()}))):this.$message.info("Select the worklogs to be uploaded!")}},{key:"deleteWorklog",value:function(e){var t=this;e||(e=this.state.worklogs.filter((function(e){return e.selected})));var a=e.map((function(e){return e.id}));0!==a.length?de.b.confirmDelete("Are you sure to delete the selected worklog(s)?","Confirm delete worklog(s)").then((function(){t.setState({isLoading:!0}),t.$worklog.deleteWorklogs(a).then((function(e){t.refreshData(),t.performAction(E.a.DeletedWorklog)}))})):this.$message.info("Select the worklogs to be deleted!")}},{key:"executeEvent",value:function(e){e.type===E.a.AddWorklog||e.type===E.a.DeletedWorklog||e.type===E.a.WorklogModified?this.refreshData():Object(g.a)(Object(f.a)(a.prototype),"executeEvent",this).call(this,e)}},{key:"selectRowItem",value:function(e){e.selected=!e.selected;var t=this.state.worklogs;this.setState({worklogs:Object(r.a)(t)})}},{key:"renderCustomActions",value:function(){var e=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement(I.b,{icon:"fa fa-upload",onClick:function(){return e.uploadWorklog()},title:"Upload selected worklogs"}),k.a.createElement(I.b,{type:"danger",icon:"fa fa-trash-o",onClick:function(){return e.deleteWorklog()},title:"Delete selected worklogs"}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.worklogs,r=t.selAllChk;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement(K.c,{dataset:n,exportSheetName:"Pending worklogs"},k.a.createElement(K.e,null,k.a.createElement("tr",null,k.a.createElement(K.a,{className:"w40",noExport:!0},k.a.createElement(I.c,{checked:r,onChange:this.selectAll})),k.a.createElement(K.a,{sortBy:"ticketNo"},"Ticket No"),k.a.createElement(K.a,{sortBy:"summary"},"Summary"),k.a.createElement(K.a,{sortBy:"dateStarted"},"Log Time"),k.a.createElement(K.a,{sortBy:"timeSpent"},"Time Spent"),k.a.createElement(K.a,{sortBy:"overrideTimeSpent"},"Override Time"),k.a.createElement(K.a,null,"Description"))),k.a.createElement(K.d,null,(function(t){return k.a.createElement("tr",{key:t.id,onContextMenu:function(a){return e.showContext(a,t)},className:t.rowClass},k.a.createElement("td",{className:"text-center"},t.selected&&k.a.createElement(I.c,{checked:!0,onChange:function(){return e.selectRowItem(t)}}),!t.selected&&k.a.createElement("i",{className:"fa fa-ellipsis-v",onClick:function(a){return e.showContext(a,t)}})),k.a.createElement("td",null,k.a.createElement("a",{href:t.ticketUrl,rel:"noopener noreferrer",className:"link strike",target:"_blank"},t.ticketNo)),k.a.createElement("td",null,t.summary),k.a.createElement("td",null,t.displayDate),k.a.createElement("td",null,t.timeSpent),k.a.createElement("td",null,t.overrideTimeSpent),k.a.createElement("td",null,t.description))})),k.a.createElement(K.b,{span:7},"No worklog pending to be uploaded!")))}}]),a}(E.b),be=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e,"Ticketwise worklog","fa-list-alt")).refreshData=function(){var e=n.settings.dateRange;e&&e.fromDate&&(n.setState({isLoading:!0}),e.dateWise=!1,n.$worklog.getWorklogs(e).then((function(e){e.forEach((function(e){e.rowClass=n.$utils.getRowStatus(e),e.ticketUrl=n.$userutils.getTicketUrl(e.ticketNo),e.totalHours=n.$utils.formatTs(e.totalHours),e.uploaded=n.$utils.formatTs(e.uploaded),e.pendingUpload=n.$utils.formatTs(e.pendingUpload)})),n.setState({isLoading:!1,worklogs:e})})))},n.dateSelected=function(e){n.settings.dateRange=e,e.toDate&&(n.refreshData(),e.auto||n.saveSettings())},Object(z.b)(Object(d.a)(n),"WorklogService","UserUtilsService","UtilsService"),n.contextMenu=[{label:"Upload worklog",icon:"fa fa-clock-o",command:function(){return n.uploadWorklog()}},{label:"Add worklog",icon:"fa fa-bookmark",command:function(){return n.addWorklog()}}],n}return Object(u.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.refreshData()}},{key:"showContext",value:function(e,t){this.selectedTicket=t,Object(W.showContextMenu)(e,this.contextMenu)}},{key:"renderCustomActions",value:function(){return k.a.createElement(I.e,{range:!0,value:this.settings.dateRange,onChange:this.dateSelected,style:{marginRight:"35px"}})}},{key:"getWorklogUrl",value:function(e,t){return this.$userutils.getWorklogUrl(e,t)}},{key:"getTicketUrl",value:function(e){return this.$userutils.getTicketUrl(e)}},{key:"uploadWorklog",value:function(){var e=this,t=this.selectedTicket.logData.filter((function(e){return!e.worklogId})).map((function(e){return e.id}));t.length&&(this.setState({isLoading:!0}),this.$worklog.uploadWorklogs(t).then((function(){e.refreshData(),Object(g.a)(Object(f.a)(a.prototype),"performAction",e).call(e,n.a.WorklogModified)}),(function(t){e.setState({isLoading:!1})})))}},{key:"addWorklog",value:function(){var e=this.selectedTicket.ticketNo,t=T().subtract(1,"hours").toDate();Object(g.a)(Object(f.a)(a.prototype),"addWorklog",this).call(this,{ticketNo:e,startTime:t,timeSpent:"01:00",allowOverride:!0})}},{key:"render",value:function(){var e=this,t=this.state.worklogs;return Object(g.a)(Object(f.a)(a.prototype),"renderBase",this).call(this,k.a.createElement(K.c,{dataset:t,exportSheetName:"Ticketwise worklog"},k.a.createElement(K.e,null,k.a.createElement("tr",null,k.a.createElement(K.a,{sortBy:"ticketNo",style:{width:"100px"}},"Ticket No"),k.a.createElement(K.a,{sortBy:"summary"},"Summary"),k.a.createElement(K.a,{sortBy:"totalHours"},"Total Hours"),k.a.createElement(K.a,{sortBy:"uploaded"},"Uploaded"),k.a.createElement(K.a,{sortBy:"pendingUpload"},"Pending Upload"),k.a.createElement(K.a,{sortBy:"parentKey"},"Parent Ticket"),k.a.createElement(K.a,null,"Dates Logged"),k.a.createElement(K.a,{style:{width:"400px"}},"Description"))),k.a.createElement(K.d,null,(function(t){return k.a.createElement("tr",{key:t.ticketNo,onContextMenu:function(a){return e.showContext(a,t)},className:t.rowClass},k.a.createElement("td",null,k.a.createElement("a",{href:t.ticketUrl,rel:"noopener noreferrer",className:"link strike",target:"_blank"},t.ticketNo)),k.a.createElement("td",null,t.summary),k.a.createElement("td",null,t.totalHours),k.a.createElement("td",null,t.uploaded),k.a.createElement("td",null,t.pendingUpload),k.a.createElement("td",null,t.parentKey?"".concat(t.parentKey," - ").concat(t.parentSumm):""),k.a.createElement("td",null,k.a.createElement("ul",{className:"tags"},t.logData.map((function(a,n){return k.a.createElement("li",{key:n},a.worklogId&&k.a.createElement("a",{className:"link badge badge-pill skin-bg-font",href:e.getWorklogUrl(t.ticketNo,a.worklogId),target:"_blank",rel:"noopener noreferrer",title:a.comments},k.a.createElement("span",{className:"fa fa-clock-o"}),"  ",k.a.createElement(H.b,{tag:"span",value:a.dateLogged}),": ",a.uploaded),!a.worklogId&&k.a.createElement("span",{className:"link badge badge-pill skin-bg-font",onClick:function(){return e.editWorklog(a.id)},title:a.comments},k.a.createElement("span",{className:"fa fa-clock-o"})," ",k.a.createElement(H.b,{tag:"span",value:a.dateLogged}),": ",a.uploaded))})))),k.a.createElement("td",null,t.description))})),k.a.createElement(K.b,{span:8},"No records exists")))}}]),a}(E.b),we=[{id:"myOpenTickets",icon:"fa-eye",name:"My Open Tickets",details:"Contains the list of open tickets assigned to you"},{id:"myBookmarks",icon:"fa-bookmark",name:"Bookmarks",details:"List of bookmarked tickets"},{id:"dateWiseWorklog",icon:"fa-list-alt",name:"Logged Work - [Daywise]",details:"List of worklog's grouped by date"},{id:"pendingWorklog",icon:"fa-clock-o",name:"Worklog - [Pending Upload]",details:"Worklog's still pending for upload"},{id:"ticketWiseWorklog",icon:"fa-list-alt",name:"Logged Work - [Ticketwise]",details:"List of worklog's grouped by ticket"},{id:"myFilters",icon:"fa-filter",name:"My Reports",details:"List of custom & advanced report built / imported by you"},{id:"agendaDay",icon:"fa-calendar",name:"Current day calendar",details:"Display calendar for current date for worklog and meetings"},{id:"agendaWeek",icon:"fa-calendar",name:"Current week calendar",details:"Display calendar for current week for worklog and meetings"},{id:"sWiseTSpent",icon:"fa-list-alt",name:"Status Wise Time Spent",details:"Provides summary of time spent on each ticket on individual status"}]},272:function(e,t,a){},273:function(e,t,a){},275:function(e,t,a){},525:function(e,t,a){},850:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(6),o=a(15),i=a(16),s=a(2),l=a.n(s),c=a(262),u=(a(525),function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"calendar-view"},l.a.createElement(c.a,{isGadget:!1}))}}]),a}(s.PureComponent));t.default=u}}]);
//# sourceMappingURL=22.90bae378.chunk.js.map