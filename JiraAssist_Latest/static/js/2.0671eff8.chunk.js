(this["webpackJsonpjira-assistant"]=this["webpackJsonpjira-assistant"]||[]).push([[2],{253:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return b})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return N})),n.d(t,"k",(function(){return x})),n.d(t,"l",(function(){return F})),n.d(t,"m",(function(){return T}));var a=n(5),r=n(6),o=n(15),l=n(16),i=n(2),u=n.n(i),s=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tag,n=void 0===t?"td":t,a=e.className,r=e.settings,o=e.count,l=!!o&&!(null===r||void 0===r||!r.showGroupCount)&&u.a.createElement("span",{className:"badge badge-info margin-l-5",title:"Total issues in group: ".concat(o)},"(",o,")");return u.a.createElement(n,{className:a},this.renderControl(l))}}]),n}(i.PureComponent),c=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"renderControl",value:function(){var e=this.props.value;return null!==e&&void 0!==e&&e.length?"".concat(e.length," comments"):null}}]),n}(s),p=n(46),d=n(35),v=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),r=t.call(this,e),Object(d.b)(Object(p.a)(r),"UserUtilsService"),r}return Object(r.a)(n,[{key:"renderControl",value:function(e){var t=this.props,n=t.value,a=t.date,r=void 0===a?n:a,o=t.quick;return r?null!==n&&void 0!==n&&n.text?u.a.createElement(u.a.Fragment,null,n.text," ",e):u.a.createElement("span",{title:o?this.$userutils.formatDateTime(r):null},o&&"about "," ",this.$userutils.formatDateTime(r,o?"quick":null)):e}}]),n}(s),m=n(9),g=n(242),f=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),r=t.call(this),e.getTicketUrl?r.getTicketUrl=e.getTicketUrl:(Object(m.a)(Object(p.a)(r),"UserUtilsService"),r.getTicketUrl=r.$userutils.getTicketUrl),r}return Object(r.a)(n,[{key:"renderControl",value:function(e){var t,n=this.props,a=n.value,r=n.issue,o=void 0===r?a:r,l=n.title,i=n.className,s=n.settings;if(!o)return e;if("string"===typeof o)return o;var c=o.key,p=o.fields,d=null===p||void 0===p?void 0:p.issuetype,v=null===p||void 0===p?void 0:p.summary,m=null===d||void 0===d?void 0:d.iconUrl,f=null===d||void 0===d?void 0:d.name,h=null===p||void 0===p||null===(t=p.status)||void 0===t?void 0:t.name;h=!!h&&!1!==(null===s||void 0===s?void 0:s.showStatus)&&"(".concat(h,")");var y=null===s||void 0===s?void 0:s.valueType,b=c||"Unknown";return"summary"===y?b=v:"both"===y&&(b=u.a.createElement(u.a.Fragment,null,b," - ",v)),u.a.createElement("a",{href:this.getTicketUrl(c),title:l,rel:"noopener noreferrer",className:"link ".concat(i),target:"_blank"},!!m&&u.a.createElement(g.f,{src:m,title:f}),u.a.createElement("span",{title:v},b," ",h),e)}}]),n}(s),h=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(a.a)(this,n),e=t.call(this),Object(m.a)(Object(p.a)(e),"UserUtilsService"),e}return Object(r.a)(n,[{key:"renderControl",value:function(){var e=this.props.value;if(null===e||void 0===e||!e.length)return null;var t=this.$userutils.getTicketUrl;return u.a.createElement("ul",{className:"tags"},e.map((function(e,n){var a=e.type,r=a&&(e.inwardIssue?a.inward:a.outward);return u.a.createElement("li",{key:n},u.a.createElement(f,{tag:"span",issue:a?e.inwardIssue||e.outwardIssue:e,title:r,getTicketUrl:t,className:"badge badge-pill skin-bg-font"}))})))}}]),n}(s),y=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"renderControl",value:function(e){var t=this.props,n=t.value,a=t.textField,r=void 0===a?"name":a,o=t.iconField,l=void 0===o?"iconUrl":o;return n?u.a.createElement(u.a.Fragment,null,!!l&&u.a.createElement(g.f,{src:n[l]}),n[r]," ",e):e}}]),n}(s),b=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"renderControl",value:function(){var e=this.props,t=e.value,n=e.progress,a=void 0===n?t:n;return null!==a&&void 0!==a&&a.percent?"".concat(a.percent,"%"):null}}]),n}(s),k=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"renderControl",value:function(e){var t,n=this.props,a=n.value,r=n.project,o=void 0===r?a:r,l=n.settings;if(!o)return e;if("string"===typeof o)return o;var i=null===(t=o.avatarUrls)||void 0===t?void 0:t["16x16"],s=null===l||void 0===l?void 0:l.valueType,c=o.key;return"name"===s?c=o.name:"both"===s&&(c=u.a.createElement(u.a.Fragment,null,o.name," (",o.key,")")),u.a.createElement(u.a.Fragment,null,!!i&&u.a.createElement(g.f,{src:i}),c,e)}}]),n}(s),C=n(12),O=n(10),j=/^com\..*\[.*\].*$/,E=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"getRepeator",value:function(e){var t=this.props,n=t.tagProp,a=void 0===n?"name":n,r=t.titleProp,o=t.iconClass,l=t.hrefProp,i=t.hideZero,s=!!o&&u.a.createElement("span",{className:"fa ".concat(o)});return l?function(t,n){var o="string"===typeof t?t:t[a];if(0===o&&i)return null;var c=u.a.createElement("a",{href:t[l]||void 0,title:r?t[r]:void 0,rel:"noopener noreferrer",target:"_blank",className:"link badge badge-pill skin-bg-font"},s," ",o);return e?c:u.a.createElement("li",{key:n},c)}:function(t,n){var o=t;if("string"===typeof t)j.test(t)&&(o=(t=Object(O.g)(t))[a||"name"]||o);else if(0===(o=t[a])&&i)return null;var l=u.a.createElement("span",{title:r?t[r]:void 0,className:"badge badge-pill skin-bg-font"},s," ",o);return e?l:u.a.createElement("li",{key:n},l)}}},{key:"renderControl",value:function(){var e=this.props.value;return e?Array.isArray(e)?u.a.createElement("ul",{className:"tags"},e.map(this.getRepeator())):"object"===Object(C.a)(e)?this.getRepeator(!0)(e,0):void 0:null}}]),n}(s),w=n(32),S=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).showContext=function(e){Object(w.showContextMenu)(e,r.contextMenu)},Object(m.a)(Object(p.a)(r),"UserUtilsService","BookmarkService"),r.contextMenu=[!e.hideWorklog&&{label:"Add worklog",icon:"fa fa-clock-o",command:function(){return e.onAddWorklog(e.value)}},{label:"Bookmark",icon:"fa fa-bookmark",command:function(){return r.addBookmark()}}].filter(Boolean),r}return Object(r.a)(n,[{key:"renderControl",value:function(e){var t=this.props,n=t.value,a=t.url,r=void 0===a?this.$userutils.getTicketUrl(n):a,o=t.hideContext;return n?u.a.createElement(u.a.Fragment,null,!o&&u.a.createElement("i",{className:"fa fa-ellipsis-v margin-r-8",onClick:this.showContext}),u.a.createElement("a",{href:r,className:"link strike",target:"_blank",rel:"noopener noreferrer"},n),e):e}},{key:"addBookmark",value:function(){var e=this.props,t=e.value,n=e.onBookmark;this.$bookmark.addBookmark([t],!n).then(n)}}]),n}(s),N=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(a.a)(this,n),r=t.call(this,e),Object(m.a)(Object(p.a)(r),"UtilsService"),r}return Object(r.a)(n,[{key:"renderControl",value:function(e){var t,n=this.props,a=n.value,r=n.inputType,o=void 0===r?"secs":r,l=n.days,i=n.converter,s=this.props.timespent,c=void 0===s?a:s;return i&&(c=i(c)),c?("ticks"===o&&c>500&&(c=parseInt(c/1e3)),c=null!==(t=c)&&void 0!==t&&t.text?c.text:this.$utils.formatSecs(c,void 0,void 0,l),u.a.createElement("span",null,c," ",e)):e}}]),n}(s),x=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"renderControl",value:function(){var e=this.props.value;if(!e)return null;var t=e.remainingEstimate,n=e.timeSpent;return n||t?u.a.createElement("span",null,n," (",t," remaining)"):null}}]),n}(s),F=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"renderControl",value:function(e){var t,n=this.props.value;return n?(n=(null===(t=n)||void 0===t?void 0:t.text)||n,"object"!==Object(C.a)(n)?u.a.createElement(u.a.Fragment,null,n," ",e):Array.isArray(n)?n.length?this.getTagRenderer(n[0],n):null:this.getTagRenderer(n,n)):e}},{key:"getTagRenderer",value:function(e,t){return e.value?u.a.createElement(E,{value:t,tagProp:"value",tag:"span"}):e.name?u.a.createElement(E,{value:t,tagProp:"name",tag:"span"}):JSON.stringify(e)}}]),n}(s),T=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"renderControl",value:function(e){var t,n,a=this.props,r=a.value,o=a.user,l=void 0===o?r:o,i=a.settings;if(!l)return e;if("string"===typeof l)return l;var s=!(null===i||void 0===i||!i.showImage)&&((null===(t=l.avatarUrls)||void 0===t?void 0:t["32x32"])||(null===(n=l.avatarUrls)||void 0===n?void 0:n["48x48"])),c=null===i||void 0===i?void 0:i.valueType,p=l.displayName;return"email"===c?p=l.emailAddress:"both"===c&&(p=u.a.createElement(u.a.Fragment,null,l.displayName," (",l.emailAddress,")")),u.a.createElement(u.a.Fragment,null,!!s&&u.a.createElement(g.f,{className:"img-x32",src:s}),p,e)}}]),n}(s)},264:function(e,t,n){"use strict";var a=n(12),r=n(8),o=n(79),l=n(5),i=n(6),u=n(46),s=n(15),c=n(16),p=n(2),d=n.n(p),v=n(13),m=n.n(v),g=n(3),f=n(32),h=n(245),y=n(31),b=d.a.createElement("div",{className:"empty-group-msg"},"Drag and drop column here to group data"),k=d.a.createElement("span",null,"Drag and drop more columns here"),C=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).toggleSort=function(t,n){var a=e.props,o=a.groupBy,l=a.foldable,i=a.onChange,u=Object(y.a)(o);u[t]=Object(r.a)(Object(r.a)({},u[t]),{},{sortDesc:n}),i(u,l,"sort")},e.changeSettings=function(t,n){var a=e.props,o=a.groupBy,l=a.foldable,i=a.onChange,u=Object(y.a)(o);u[t]=Object(r.a)(Object(r.a)({},u[t]),{},{settings:n}),i(u,l,"settings")},e.removeGroup=function(t){var n=e.props,a=n.groupBy,r=n.foldable,o=n.onChange,l=Object(y.a)(a);l.splice(t,1),o(l,r,"remove")},e.toggleMode=function(t){var n=e.props,a=n.groupBy,r=n.foldable,o=n.onChange;!!r!==t&&o(a,t,"mode")},e.columnReordered=function(t){var n=e.props,a=n.foldable;(0,n.onChange)(t,a,"rearrange")},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.groupBy,a=t.foldable,r=t.toggleColumns,o=t.showColumns,l=t.allColumns,i=t.displayColumns,u=null;return i&&i.length<(null===l||void 0===l?void 0:l.length)?u="".concat(i.length," (").concat(l.length,")"):null!==l&&void 0!==l&&l.length&&(u=null===l||void 0===l?void 0:l.length),d.a.createElement("div",{className:"group-bar"},d.a.createElement("span",{className:"fa group-mode-icon fa-columns".concat(o?" active":""),onClick:r,title:"Click to choose what column to display"},u&&d.a.createElement("span",{className:"badge badge-warning visible-cols"},u)),n.length>0&&d.a.createElement("span",{className:"fa group-mode-icon fa-th-list".concat(a?"":" active"),onClick:function(){return e.toggleMode(!1)},title:"Display group values in columns"}),n.length>0&&d.a.createElement("span",{className:"fa group-mode-icon fa-indent".concat(a?" active":""),onClick:function(){return e.toggleMode(!0)},title:"Display group values in foldable row"}),d.a.createElement("span",{className:"group-label"},"Group by:"),d.a.createElement("div",{className:"group-list-container"},d.a.createElement(f.Sortable,{className:"group-list",items:n,itemType:"column",onChange:this.columnReordered,accepts:["column"],placeholder:n.length?k:b},(function(t,n,a){return d.a.createElement(O,{key:n,group:t,index:n,toggleSort:e.toggleSort,removeGroup:e.removeGroup,settingsChanged:e.changeSettings,dropProps:a})}))))}}]),n}(p.PureComponent),O=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).removeGroup=function(){return e.props.removeGroup(e.props.index)},e.sortAsc=function(){return e.props.toggleSort(e.props.index,!1)},e.sortDesc=function(){return e.props.toggleSort(e.props.index,!0)},e.setRef=function(t){e.el=t;var n=e.props.dropProps,a=(n=void 0===n?{}:n).dropConnector;a&&a(t)},e.changeSettings=function(t){var n=t.prop,a=t.type,o=t.value,l=t.default,i=(t.aggregate,e.props),u=i.settingsChanged,s=i.group,c=i.index,p=s.settings;if(p=p?Object(r.a)({},p):{},"check"===a){var d=void 0===p[n]?l:p[n];p[n]=!d}else p[n]=o;u(c,p)},e.showMenu=function(t){var n=e.props.group,a=n.groupOptions,r=n.settings,o=a.map((function(t){if(t.separator)return{separator:!0};var n=t.label,a=t.type,o=t.prop,l=t.value,i=void 0===l?"check"===a:l,u=t.default,s=null===r||void 0===r?void 0:r[o],c="fa fa-".concat(s===i||void 0===s&&u?"check-":"");return{label:n,icon:"".concat(c).concat("check"===a?"square":"circle"),command:function(){return e.changeSettings(t)}}}));Object(f.showContextMenu)(t,o)},e}return Object(i.a)(n,[{key:"render",value:function(){var e,t,n=this.props.group;return d.a.createElement("div",{ref:this.setRef,className:"group-list-item",onContextMenu:null!==(e=n.groupOptions)&&void 0!==e&&e.length?this.showMenu:void 0},!n.sortDesc&&d.a.createElement("span",{className:"fa fa-sort-amount-asc sort-icon",onClick:this.sortDesc,title:"Click to sort desc"}),!!n.sortDesc&&d.a.createElement("span",{className:"fa fa-sort-amount-desc sort-icon",onClick:this.sortAsc,title:"Click to sort asc"}),n.displayText,!(null===(t=n.groupOptions)||void 0===t||!t.length)&&d.a.createElement("span",{className:"fa fa-wrench margin-l-5 pointer",onClick:this.showMenu,title:"Click to change settings"}),d.a.createElement("span",{className:"fa fa-times",onClick:this.removeGroup}))}}]),n}(p.PureComponent),j=n(242),E=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).hideColumns=function(){var e=a.state.columns,t=e.filter((function(e){return e.selected}));t=t.length===e.length?null:t.map((function(e){return e.id})),e=null,a.props.onChange(t)},a.selectionChanged=function(e,t){var n=a.state.columns;(n=Object(y.a)(n))[e]=Object(r.a)(Object(r.a)({},n[e]),{},{selected:t}),a.setState({columns:n})},a.state=a.getState(e),a}return Object(i.a)(n,[{key:"getState",value:function(e){var t=e.displayColumns;return{columns:this.props.columns.map((function(e){var n=e.id;return{id:n,displayText:e.displayText,selected:!t||!!~t.indexOf(n)}}))}}},{key:"render",value:function(){var e=this,t=this.state.columns;return d.a.createElement("div",{className:"columns-list-container"},d.a.createElement("div",{className:"columns-list"},d.a.createElement("div",{className:"column-list-title"},d.a.createElement("span",{className:"fa fa-times",onClick:this.hideColumns}),d.a.createElement("span",null,"Choose Columns")),d.a.createElement("div",{className:"columns-list-items"},t.map((function(t,n){return d.a.createElement("div",{key:n,className:"column-list-item"},d.a.createElement(j.c,{label:t.displayText,checked:t.selected,onChange:function(t){return e.selectionChanged(n,t)}}))})))))}}]),n}(p.PureComponent),w=n(10),S=n(9),N=(n(523),["column"]),x=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).getGroupColumnRenderer=function(e){return function(t,n){return d.a.createElement("th",{key:n,rowSpan:e?2:void 0,className:"group-header foldable"})}},a.renderTableBody=function(e,t){return t&&t.length?a.getGroupRenderer(e,t):a.getRowRenderer(e)},a.getCellRenderer=function(e){return function(t,n){if(!t.visible)return null;var a=t.field,r=t.hasPath,l=t.format,i=t.type,u=t.viewComponent,s=t.props,c=r?Object(w.d)(e,a):e[a];return l&&"function"===typeof l&&(c=l(c,e,a)),u?d.a.createElement(u,Object(o.a)({key:n,value:c},s)):d.a.createElement("td",{key:n,exportType:i},c)}},a.toggleGroupVisibility=function(e){},a.sortColumnChanged=function(e,t){var n=Object(u.a)(a),r=n.groupBy,o=n.state,l=o.groupFoldable,i=o.data,s=n.props.displayColumns,c={groupFoldable:l},p=null===r||void 0===r?void 0:r.length;return p&&(c.data=a.sortGroupedData(i,r,e,t)),a.setState(c),a.props.onChange({groupBy:r,groupFoldable:l,displayColumns:s,sortField:e,isDesc:t}),p?c.data:void 0},a.onGroupChanged=function(e,t,n){var r=a.state.data,o={data:r,groupFoldable:t},l=a.props,i=l.displayColumns,u=l.sortField,s=l.isDesc,c=l.groupBy;"sort"===n&&(o.data=a.sortGroupedData(r,e,u,s)),e="mode"!==n?e.map((function(e){return{id:e.id,field:e.field,fieldKey:e.fieldKey,sortDesc:e.sortDesc,settings:e.settings}})):c,a.setState(o),a.props.onChange({groupBy:e,displayColumns:i,groupFoldable:t,sortField:u,isDesc:s})},a.toggleColumns=function(){a.setState({showColumns:!a.state.showColumns})},a.columnSelectionChanged=function(e){var t=a.props,n=t.groupBy,r=t.groupFoldable,o=t.sortField,l=t.isDesc;a.setState({showColumns:null},(function(){return a.props.onChange({groupBy:n,displayColumns:e,groupFoldable:r,sortField:o,isDesc:l})}))},Object(S.a)(Object(u.a)(a),"UtilsService"),a.convertDate=a.$utils.convertDate,a.state=a.getNewState(e),a}return Object(i.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(this.getNewState(e))}},{key:"getNewState",value:function(e){var t=e.groupBy,n=e.columns,a=e.displayColumns,o=e.dataset,l=e.groupFoldable,i=e.sortField,u=e.isDesc,s=Object(r.a)(Object(r.a)({},this.state),{},{groupFoldable:l});this.columns===n&&a===this.displayColumns||(s.allColumns=this.getColumnSchema(e),s.columns=s.allColumns,this.columns=n,this.displayColumns=a);var c=this.groupBy!==t;if(c)if(s.groupBy=this.getGroupedColumnSchema(t,s.allColumns),this.groupBy=t,t&&t.length){var p=t.map((function(e){return"string"===typeof e?e:e.id||e.field}));s.columns=s.allColumns.filter((function(e){return e.visible&&!~p.indexOf(e.id)}))}else s.columns=s.allColumns.filter((function(e){return e.visible}));return(c||this.isDesc!==u||this.sortField!==i||this.dataset!==o)&&(s.data=this.prepareDataForRendering(o,s.groupBy,i,u),this.dataset=o,this.sortField=i,this.isDesc=u),s}},{key:"getGroupedColumnSchema",value:function(e,t){var n=null;return Array.isArray(e)&&e.length&&(t=t.reduce((function(e,t){return e[t.id]=t,e}),{}),(n=e.map((function(e){var n=e,r=e,o=n,l=!1,i=void 0;if("object"===Object(a.a)(e)&&(n=e.field,r=e.id||n,o=e.fieldKey||e.groupKey||n,l=e.sortDesc,i=e.settings),!(e=t[r]))return null;var u=e,s=u.displayText,c=u.allowSorting,p=u.groupOptions,d=u.type;return{id:r,field:n,viewComponent:u.viewComponent,fieldKey:o,displayText:s,allowSorting:c,groupOptions:p,sortDesc:l,visible:!0,settings:i,type:d}})).filter(Boolean)).length||(n=null)),n}},{key:"getColumnSchema",value:function(e){var t=e.columns,n=e.allowSorting,a=void 0===n||n,r=e.allowGrouping,o=void 0===r||r,l=e.displayColumns;Array.isArray(l)||(l=null);var i=!!l&&l.any((function(e){return e.startsWith("-")}));return t.map((function(e){var t=e.field,n=e.fieldKey,r=void 0===n?t:n,u=e.allowSorting,s=void 0===u?a:u,c=e.groupText,p=e.allowGrouping,d=void 0===p?o:p,v=e.groupOptions,m=e.format,g=e.type,f=e.viewComponent,h=e.props,y=e.sortValueFun,b=e.groupValueFunc,k=e.id||t;return{id:k,field:e.field,fieldKey:r,hasPath:(null===t||void 0===t?void 0:t.indexOf("."))>0,displayText:e.displayText||t,visible:!l||(i?!l.contains("-".concat(k)):l.contains(k)),allowSorting:s,groupText:c,allowGrouping:d,groupOptions:v,format:m,type:g,viewComponent:f,props:h,sortValueFun:y,groupValueFunc:b}}))}},{key:"prepareDataForRendering",value:function(e,t,n,a){return t&&t.length&&Array.isArray(e)&&e.length?this.groupData(e,t,n,a):n?e.sortBy(n,a):e}},{key:"groupData",value:function(e,t,n,a,r){var o,l=this;if(r=r?"".concat(r,"_"):"",!t.length)return n?e.sortBy(n,a):e;var i=t[0],u=i.field,s=i.fieldKey,c=i.sortDesc,p=i.settings,d=i.type;t=t.slice(1);var v=s&&s!==u,m=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.groupBy(t,null,v?u:n)},f=null===p||void 0===p?void 0:p.funcType,h=this.convertDate,y=null;if("date"===d||"datetime"===d){var b=function(e){var t=h(e[u]);return t?t.format(f):t};"friendly"===(f=f||"yyyy-MM (MMMM)")&&(b=function(e){var t=e[u];return t?g(t).fromNow():t}),y=m(b,(function(e,t){return{text:t||"(no date)"}}))}else if(!f||"number"!==d&&"seconds"!==d){switch(null===p||void 0===p?void 0:p.valueType){case"count":y=[{key:e.length,values:e}];break;case"distinct":y=[{key:null===(o=e.distinct(s||u))||void 0===o?void 0:o.length,values:e}];break;default:y=m(s||u)}}else switch(f){default:y=m(s||u);break;case"sum":y=[{key:e.sum(u),values:e}];break;case"avg":y=[{key:e.avg(u),values:e}];break;case"count":var k=e.count((function(e){return e[u]>0}));y=[{key:k,keyObj:{text:"".concat(k," has value")},values:e}]}return y.sortBy("key",c).map((function(e,o){return{key:e.key,keyObj:e.keyObj,path:r+o,rowSpan:e.values.length,values:l.groupData(e.values,t,n,a,r+o)}}))}},{key:"getColumnGrouping",value:function(e){var t=e.groupBy("groupText",(function(e){return e.visible})).filter((function(e){return!!e.key}));return t.length?t:void 0}},{key:"getColGroupingLen",value:function(e){if(e)return e.reduce((function(e,t){return e[t.key]=t.values.length,e}),{})}},{key:"getGroupedRow",value:function(e){var t=this;return e?d.a.createElement(h.f,null,e.map((function(e){return e.values.map(t.getColumnRenderer(!1))}))):null}},{key:"getColumnRenderer",value:function(e,t){return function(n,a){if(!n.visible)return null;var r=!e&&n.allowSorting?n.fieldKey||n.field:void 0,o=n.allowGrouping,l=t?2:void 0,i=void 0,u=n.displayText;if(t&&n.groupText){if(u=n.groupText,!(i=t[u]))return null;delete t[u],l=void 0,r=void 0,o=!1}return!1===o?d.a.createElement(h.a,{key:a,sortBy:r,rowSpan:l,colSpan:i},u):d.a.createElement(f.Draggable,{key:a,itemType:"column",item:n,itemTarget:N},(function(e,t){return d.a.createElement(h.a,{rowSpan:l,colSpan:i,dragConnector:e,sortBy:r},u)}))}}},{key:"getRowRenderer",value:function(e){var t=this;return function(n,a){return d.a.createElement("tr",{key:a},t.renderRowCells(e,n))}}},{key:"renderRowCells",value:function(e,t){return e.map(this.getCellRenderer(t))}},{key:"getGroupRenderer",value:function(e,t){var n=this;return this.state.groupFoldable?function(a,r){return n.renderFoldableGroupRow(a,r,e,t)}:function(a,r){return n.renderGroupRow(a,r,e,t)}}},{key:"renderFoldableGroupRow",value:function(e,t,n,a){var r,o=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=a[0],u=(null===i||void 0===i||null===(r=i.settings)||void 0===r?void 0:r.valueType)||"value",s="value"!==u?null:null===i||void 0===i?void 0:i.viewComponent,c=l>0&&[].init((function(e,t){return d.a.createElement("td",{key:t,className:"group-indent-td"})}),l),v=a.length>0&&d.a.createElement("tr",{key:e.key},c,d.a.createElement("td",{className:"group-toggler-td",title:"Click to ".concat(e.hidden?"expand":"collapse"," group"),"group-path":e.path,onClick:this.toggleGroupVisibility},d.a.createElement("span",{className:"fa fa-caret-".concat(e.hidden?"right":"down")})),d.a.createElement("td",{className:"group-name-td",colSpan:a.length-l+n.length},s?d.a.createElement(s,{tag:"span",count:e.rowSpan,value:e.keyObj||e.key,settings:i.settings}):e.key||"")),m=null;return a.length>0?m=e.values.map((function(e,t){return o.renderFoldableGroupRow(e,t,n,a.slice(1),l+1)})):(m=n.map(this.getCellRenderer(e)),m=d.a.createElement("tr",{key:t},c,m)),d.a.createElement(p.Fragment,{key:t},v,m)}},{key:"renderGroupRow",value:function(e,t,n,a){var r,o=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=a[0],u=(null===i||void 0===i||null===(r=i.settings)||void 0===r?void 0:r.valueType)||"value",s="value"!==u?null:null===i||void 0===i?void 0:i.viewComponent,c=a.length>0&&d.a.createElement("td",{rowSpan:e.rowSpan},s?d.a.createElement(s,{tag:"span",count:e.rowSpan,settings:null===i||void 0===i?void 0:i.settings,value:e.keyObj||e.key}):e.key||"");l&&c?c=d.a.createElement(p.Fragment,null,l,c):l&&0===t&&(c=l);var v=null;return a.length>0?v=e.values.map((function(e,t){return o.renderGroupRow(e,t,n,a.slice(1),0===t&&c)})):(v=n.map(this.getCellRenderer(e)),v=d.a.createElement("tr",{key:t},c,v)),v}},{key:"sortGroupedData",value:function(e,t,n,a,o){var l=this;if(o=o?"".concat(o,"_"):"",0===t.length)return n?e.sortBy(n,a):e;var i=t[0].sortDesc;return t=t.slice(1),e.sortBy("key",i).map((function(e,i){return Object(r.a)(Object(r.a)({},e),{},{path:o+i,values:l.sortGroupedData(e.values,t,n,a,o+i)})}))}},{key:"render",value:function(){var e=this.props,t=e.exportSheetName,n=e.noRowsMessage,a=e.sortField,r=e.isDesc,o=e.displayColumns,l=e.className,i=e.hideGroups,u=this.state,s=u.allColumns,c=u.columns,p=u.groupBy,v=u.groupFoldable,g=u.data,f=u.showColumns,y=this.getColumnGrouping(c),b=this.getColGroupingLen(y);return d.a.createElement("div",{className:m()("groupable-grid",i&&"groups-hidden")},f&&d.a.createElement(E,{onChange:this.columnSelectionChanged,columns:s,displayColumns:o}),!i&&d.a.createElement(C,{groupBy:p||[],displayColumns:o,allColumns:s,foldable:v,showColumns:f,onChange:this.onGroupChanged,toggleColumns:this.toggleColumns}),d.a.createElement(h.c,{className:l,dataset:g,exportSheetName:t,sortBy:a,isDesc:r,onSort:this.sortColumnChanged},d.a.createElement(h.e,null,d.a.createElement(h.f,null,!!v&&p&&p.map(this.getGroupColumnRenderer(b)),!v&&p&&p.map(this.getColumnRenderer(!0,b)),c.map(this.getColumnRenderer(!1,b))),this.getGroupedRow(y)),d.a.createElement(h.d,null,this.renderTableBody(c,p)),d.a.createElement(h.b,{span:c.length},n)))}}]),n}(p.PureComponent);t.a=x},296:function(e,t,n){"use strict";var a=n(5),r=n(6),o=n(15),l=n(16),i=n(2),u=n.n(i),s=n(292),c=(n(524),function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).onChange=function(t){e.props.onChange(null===t||void 0===t?void 0:t.trim(),null)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props.jql;return u.a.createElement("div",{className:"jql-editor"},u.a.createElement(s.a,{className:"jql-query",multiline:!0,placeholder:"JQL query to fetch data",value:e,onChange:this.onChange}))}}]),n}(i.PureComponent));t.a=c},523:function(e,t,n){},524:function(e,t,n){}}]);
//# sourceMappingURL=2.0671eff8.chunk.js.map