var isFirefox,isChrome,replacePattern,useOldUI,menu,menus,html,i;if(localStorage.getItem("CurrentJiraUrl")&&localStorage.getItem("CurrentUserId")){isFirefox=typeof InstallTrigger!="undefined";isChrome=!!chrome&&(!!chrome.webstore||!!chrome.identity)&&!isFirefox;function r(n){t(n.currentTarget.getAttribute("s-href"))}replacePattern=["chrome://newtab/","chrome://tabs","about:newtab","about:tabs","about:blank"];useOldUI=!1;function t(n){n="/index"+(useOldUI?".min":"")+".html#"+(useOldUI?"!":"")+n;useOldUI&&(n=n.replace("sprint","sprintreport").replace("/settings/general","/settings"));chrome.tabs.query({active:!0,lastFocusedWindow:!0},function(t){if(t&&t[0]&&t[0].url){var i=t[0],r=i.url;if(!r||replacePattern.indexOf(r.toLowerCase())>-1){chrome.tabs.update(i.id,{url:n});window.close();return}}isChrome?window.open(n):browser.tabs.create({url:n});window.close()})}function n(){for(var t=document.getElementsByTagName("a"),n=0;n<t.length;n++)t[n].addEventListener("click",r)}if(menu=localStorage.getItem("menuAction"),menu&&!useOldUI)try{menu=JSON.parse(menu);switch(menu.action||1){case 1:if(menu.menus&&menu.menus.length>0&&Array.isArray(menu.menus)){for(menus=document.getElementById("menus"),html="",i=0;i<menu.menus.length;i++){let n=menu.menus[i];html+='<li><a s-href="'+n.url+'">'+n.name+"<\/a><\/li>"}menus.innerHTML=html}default:n();break;case 2:t(menu.url||"/dashboard/0");break;case 3:document.location.href="/index.html?quick=true#/dashboard/"+(menu.index||0)+"/1"}}catch(err){console.error(err);n()}else n()}else document.location.href="/index.html#/pages/integrate";